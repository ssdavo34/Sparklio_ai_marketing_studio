Canvas Studio v3.1: The "All-in-One" Creative Engine PRD  
ì‘ì„±ì¼: 2025-11-19  
ë²„ì „: v3.1 (Admin & Self-Learning Extended)  
ì‘ì„±ì: Antigravity (Lead Architect)  
ìƒíƒœ: ìŠ¹ì¸ ëŒ€ê¸° (Draft)

---

## 1. ğŸŒŸ Vision & Philosophy

> â€œFrom Text to Video, All in One Placeâ€

Sparklio Canvas Studio v3.1ëŠ” ë‹¨ìˆœí•œ ì´ë¯¸ì§€ ì—ë””í„°ê°€ ì•„ë‹ˆë¼,  
ê¸°íš(Planning) â†’ ë””ìì¸(Design) â†’ ì˜ìƒ(Video)ê¹Œì§€ **í•˜ë‚˜ì˜ ì¸í„°í˜ì´ìŠ¤ì—ì„œ ëŠê¹€ ì—†ì´ í™•ì¥ë˜ëŠ” ì „ë¬¸ê°€ìš© í¬ë¦¬ì—ì´í‹°ë¸Œ IDE(Integrated Development Environment)**ì´ë‹¤.

### 1.1 í•µì‹¬ ì² í•™

- **IDE for Creatives**  
    ê°œë°œìê°€ VSCodeì—ì„œ ì½”ë”©Â·ë¹Œë“œÂ·ë””ë²„ê¹…ì„ ëª¨ë‘ ì²˜ë¦¬í•˜ë“¯,  
    ë§ˆì¼€í„°/í¬ë¦¬ì—ì´í„°ëŠ” ëª¨ë“  ë§ˆì¼€íŒ… ì‚°ì¶œë¬¼ì„ Canvas Studioì—ì„œ ì™„ê²°í•œë‹¤.
    
- **Agent-Native**  
    AIëŠ” â€œíˆ´â€ì´ ì•„ë‹ˆë¼ í•¨ê»˜ ì‘ì—…í•˜ëŠ” **ë™ë£Œ(Co-pilot)**ì´ë‹¤.  
    ì—ë””í„°ì˜ ê±°ì˜ ëª¨ë“  ê¸°ëŠ¥ì€ ì—ì´ì „íŠ¸(Strategist, Copywriter, Designer, VideoGen)ê°€ ì»¤ë§¨ë“œ í˜•íƒœë¡œ ì œì–´í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
    
- **Future-Proof (Video Ready)**  
    ì´ˆê¸° ì„¤ê³„ë¶€í„° **íƒ€ì„ë¼ì¸(Timeline)**ê³¼ **ì‹œí€€ìŠ¤(Sequence)** ê°œë…ì„ í¬í•¨í•˜ì—¬,  
    ì •ì§€ ì´ë¯¸ì§€ â†’ ëª¨ì…˜ ê·¸ë˜í”½ â†’ í’€ ë¹„ë””ì˜¤ í¸ì§‘ìœ¼ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ í™•ì¥í•œë‹¤.
    
- **Brand-Aware & Data-Driven**  
    Brand Kit, RAG, Template Library, Usage Logë¥¼ í†µí•´  
    ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ ë” â€œë¸Œëœë“œë¥¼ ì˜ ì•„ëŠ”â€ í¬ë¦¬ì—ì´í‹°ë¸Œ ì—”ì§„ì´ ëœë‹¤.
    
- **Admin-Driven Self-Learning**  
    ê´€ë¦¬ì ëª¨ë“œ(Admin Studio)ë¥¼ í†µí•´  
    íŠ¸ë Œë“œ í¬ë¡¤ë§, í…œí”Œë¦¿ ìë™ ìƒì„±, í’ˆì§ˆ í‰ê°€, í•™ìŠµ ë°ì´í„° ê´€ë¦¬ê°€ ì´ë£¨ì–´ì§€ê³ ,  
    Canvas StudioëŠ” ê·¸ í•™ìŠµ ê²°ê³¼ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ í™œìš©í•œë‹¤.
    

---

## 2. ğŸ— System Architecture & Infrastructure

### 2.1 Hybrid Infrastructure Strategy

ê° í•˜ë“œì›¨ì–´ì˜ íŠ¹ì„±ì— ë§ì¶˜ ìµœì  ë°°ì¹˜ ì „ëµ:

|Node|Role|Deployment|Details|
|---|---|---|---|
|Mac mini|Backend Core|Docker Compose|â€¢ API Server: FastAPI (Orchestrator) â€¢ DB: PostgreSQL (Data, pgvector) â€¢ Cache/Queue: Redis â€¢ Storage: MinIO (Assets) â€¢ Monitoring: Prometheus + Grafana|
|Desktop|AI Engine|Hybrid|â€¢ LLM: Docker (Ollama - Qwen2.5/Llama3) â€¢ Image/Video: Native Python (ComfyUI - Flux/SDXL/SVD) â€¢ Heavy Video Render: FFmpeg + GPU íŒŒì´í”„ë¼ì¸|
|Laptop|Frontend Studio|Next.js (SPA/SSR)|â€¢ Client: React + Zustand â€¢ Rendering: Konva/Fabric (Canvas) â€¢ Dev: Hot Reloading, Storybook ë“±|

### 2.2 Software Architecture (Frontend)

- **Pattern**: Headless Editor
    
    - UI Layerì™€ Canvas Engine, ìƒíƒœ(Zustand)ë¥¼ ì² ì €íˆ ë¶„ë¦¬.
        
    - ëª¨ë“  í¸ì§‘ ì‘ì—…ì€ `EditorCommand`ë¥¼ í†µí•´ ìˆ˜í–‰ëœë‹¤.
        
- **State Management**:
    
    - Zustand + Immer
        
    - `StudioStore`ëŠ” ë‹¨ì¼ ì§„ì‹¤ ê³µê¸‰ì›(Single Source of Truth).
        
- **Rendering Engine**
    
    - **Phase 1 (Image)**: Konva.js ì¤‘ì‹¬ (í•„ìš” ì‹œ Fabric.js ì¼ë¶€ í™œìš©)
        
    - **Phase 2 (Video)**: Remotion ë˜ëŠ” Pixi.js ê¸°ë°˜ Timeline Renderingì„ í†µí•©.
        
- **Agent Interface**
    
    - Command Patternì„ ì‚¬ìš©í•˜ì—¬ AIì˜ ìì—°ì–´ ëª…ë ¹ì„ EditorCommandë¡œ ë³€í™˜.
        
    - ì—ì´ì „íŠ¸ëŠ” `document snapshot + selection + natural_language`ë¥¼ ì…ë ¥ìœ¼ë¡œ ë°›ì•„  
        `commands[]`ë¥¼ ë°˜í™˜í•œë‹¤.
        

### 2.3 Sparklio ì „ì²´ í”Œë¡œìš°ì—ì„œì˜ ìœ„ì¹˜

Sparklio V4 ì „ì²´ í”Œë¡œìš°:

- Landing â†’ **Create(Chat)** â†’ **Editor(Canvas Studio)** â†’ Publish
    

Canvas Studioì˜ ì—­í• :

- **Create(Chat)** ë‹¨ê³„ì—ì„œ ìƒì„±ëœ ì´ˆì•ˆ(ë¸Œëœë“œ ë¸Œë¦¬í”„, ì¹´í”¼, ë ˆì´ì•„ì›ƒ ì¶”ì²œ)ì„ ë°›ì•„  
    **ì‹œê°ì ìœ¼ë¡œ ì™„ì„±í•˜ëŠ” ë©”ì¸ ì‘ì—…ì‹¤**.
    
- MeetingAI, Brand Analysis ë“±ì—ì„œ ìƒì„±ëœ ê²°ê³¼ë¬¼ì„  
    `/studio?docId=xxx&mode=P/E`ë¡œ ì—´ì–´ í›„ì† ì‘ì—…ì„ ìˆ˜í–‰.
    
- Publish ëª¨ë“ˆê³¼ ì—°ê²°ë˜ì–´ **ë©€í‹° ì±„ë„ ë°œí–‰ ì „ ë§ˆì§€ë§‰ ìŠ¤í…Œì´ì…˜** ì—­í•  ìˆ˜í–‰.
    

---

## 3. ğŸ¨ UX/UI Design: "The Studio Layout"

VSCodeì˜ íš¨ìœ¨ì ì¸ ë ˆì´ì•„ì›ƒì„ ì°¨ìš©í•œ ì „ë¬¸ê°€ìš© ì‘ì—…í™˜ê²½.

### 3.1 Layout Structure

```text
â”Œâ”€â”€ Top Toolbar (Global Actions) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ - New / Open / Save / Undo / Redo                                   â”‚
â”‚ - Brand Switcher (Brand Kit ì„ íƒ)                                   â”‚
â”‚ - Zoom / View / Snap / Grid                                         â”‚
â”‚                                                                      â”‚
â”‚ â”Œâ”€ Activity Bar (Mode Switch)                                        â”‚
â”‚ â”‚  [P] Planning (Concept Board)                                      â”‚
â”‚ â”‚  [E] Editor (Canvas Studio)                                        â”‚
â”‚ â”‚  [V] Video (Timeline Studio) *Future                               â”‚
â”‚ â”‚  [A] Admin (Admin Studio)* INTERNAL_MODE=true ì¼ ë•Œë§Œ             â”‚
â”‚ â”‚  [S] Settings                                                      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â”Œâ”€ Left Panel (Context) â”€â”€â” â”Œâ”€ Main Canvas (Work) â”€â”€â” â”Œâ”€ Right Dock (Tools) â”€â”
â”‚ â”‚                         â”‚ â”‚                       â”‚ â”‚                      â”‚
â”‚ â”‚ â€¢ Pages / Slides        â”‚ â”‚                       â”‚ â”‚ â€¢ Properties         â”‚
â”‚ â”‚ â€¢ Assets Library        â”‚ â”‚    [ Infinite     ]   â”‚ â”‚ â€¢ Brand Panel        â”‚
â”‚ â”‚ â€¢ Layers Tree           â”‚ â”‚    [    Canvas    ]   â”‚ â”‚ â€¢ AI Chat (Co-pilot) â”‚
â”‚ â”‚ â€¢ Templates (System/Brand/User)                   â”‚ â”‚ â€¢ Export / Publish   â”‚
â”‚ â”‚                         â”‚ â”‚                       â”‚ â”‚                      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â”Œâ”€ Bottom Panel (Timeline/Logs) *Collapsible â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚ â€¢ Video Timeline (Tracks, Keyframes)                               â”‚
â”‚ â”‚ â€¢ Agent Logs / System Status / Publish Queue                       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Key Modes (Activities)

#### 3.2.1 Concept Board (Planning: [P])

- ë¬´í•œ ìº”ë²„ìŠ¤ í™”ì´íŠ¸ë³´ë“œ.
    
- ë ˆí¼ëŸ°ìŠ¤ ìˆ˜ì§‘, ë©”ëª¨, ì•„ì´ë””ì–´ ìŠ¤ì¼€ì¹˜, íŠ¸ë Œë“œ ì¹´ë“œ ë°°ì¹˜.
    
- **TrendCollector, StrategistAgent**ê°€ ìˆ˜ì§‘í•œ ì¸ì‚¬ì´íŠ¸ë¥¼ ì¹´ë“œ í˜•íƒœë¡œ ë¿Œë ¤ì¤Œ.
    
- ì¹´ë“œ ì˜ˆ:
    
    - ê²½ìŸì‚¬ ëœë”© ìŠ¤í¬ë¦°ìƒ·
        
    - ìš°ìˆ˜ ê´‘ê³  í¬ë¦¬ì—ì´í‹°ë¸Œ
        
    - í‚¤ì›Œë“œ/í˜ë¥´ì†Œë‚˜ ìš”ì•½
        

#### 3.2.2 Canvas Studio (Editor: [E])

- ì •ë°€í•œ ë””ìì¸ ëª¨ë“œ:
    
    - A4, Instagram, Slide, Thumbnail, Banner ë“± ë‹¤ì–‘í•œ ê·œê²© ì§€ì›.
        
- ê¸°ëŠ¥:
    
    - ê°ì²´ ì¡°ì‘ (ì´ë™, ë¦¬ì‚¬ì´ì¦ˆ, íšŒì „, ê·¸ë£¹í•‘)
        
    - ì •ë ¬, Smart Guide, Snap-to-Grid, Safe Area í‘œì‹œ
        
    - íƒ€ì´í¬ê·¸ë˜í”¼ ì œì–´ (í°íŠ¸, ì¤„ê°„ê²©, ìê°„, Text Style)
        
    - Components (ë²„íŠ¼, ì¹´ë“œ, ê°€ê²©í‘œ, ë¦¬ë·° ë¸”ë¡ ë“± ë§ˆì¼€íŒ… ë¸”ë¡)
        
- ì—ì´ì „íŠ¸:
    
    - CopywriterAgent, DesignerAgent, EditorAgentê°€  
        í…ìŠ¤íŠ¸/ë ˆì´ì•„ì›ƒ/ìŠ¤íƒ€ì¼ì„ ì œì•ˆí•˜ê³  ìˆ˜ì •.
        

#### 3.2.3 Video Studio (Future: [V])

- Canvas Studioì—ì„œ ë§Œë“  ê²°ê³¼ë¬¼ì„ íƒ€ì„ë¼ì¸ ìœ„ì— ë°°ì¹˜.
    
- ëª¨ì…˜ íš¨ê³¼, íŠ¸ëœì§€ì…˜, ì˜¤ë””ì˜¤ ì‹±í¬, ì»· í¸ì§‘.
    
- VideoGenAgent(SVD/Runway/VEo ê³„ì—´)ê°€ ì»· í¸ì§‘ ë° ëª¨ì…˜ ì œì•ˆ.
    

#### 3.2.4 Admin Studio (ê´€ë¦¬ì ëª¨ë“œ: [A], INTERNAL_MODE ì „ìš©)

- Trend Crawler ê´€ë¦¬, ë°ì´í„°ì…‹/í…œí”Œë¦¿ ê´€ë¦¬, ìë™ í…œí”Œë¦¿ ìƒì„±, í’ˆì§ˆ í‰ê°€.
    
- ê´€ë¦¬ìë§Œ ì ‘ê·¼ ê°€ëŠ¥ (Feature Flag: `INTERNAL_MODE=true`).
    
- ìì„¸í•œ ë‚´ìš©ì€ Â§7 ì°¸ì¡°.
    

### 3.3 Interaction Model: Spark Chat (Chat-to-Edit)

> â€œë§í•˜ëŠ” ëŒ€ë¡œ ë””ìì¸ëœë‹¤â€

- ìš°ì¸¡ Dock ë‚´ ìƒì£¼, ë‹¨ì¶•í‚¤ `Cmd/Ctrl + K`ë¡œ í¬ì»¤ìŠ¤.
    
- ë‹¨ìˆœ ì±„íŒ…ì´ ì•„ë‹Œ **ì—ë””í„°ì˜ ì»¤ë§¨ë“œ ì„¼í„°**.
    

#### 3.3.1 Chat-to-Action Flow

- User: â€œë°°ê²½ì„ ì°¨ë¶„í•œ íŒŒë€ìƒ‰ ê·¸ë¼ë°ì´ì…˜ìœ¼ë¡œ ë°”ê¿”ì¤˜.â€
    
- EditorAgent:
    
    - í˜„ì¬ Document/Selection/BrandContext ë¶„ì„
        
    - `UPDATE_BACKGROUND` EditorCommand ìƒì„±
        
- Editor:
    
    - ëª…ë ¹ ì‹¤í–‰ â†’ Canvas ì¦‰ì‹œ ë°˜ì˜
        
    - Historyì— ì»¤ë§¨ë“œ ìŠ¤íƒìœ¼ë¡œ ê¸°ë¡ (Undo/Redo ê°€ëŠ¥)
        

#### 3.3.2 Multi-Turn Editing

- User: â€œì´ í°íŠ¸ ë³„ë¡œì•¼.â€
    
- Agent: â€œì–´ë–¤ ëŠë‚Œì„ ì›í•˜ì‹œë‚˜ìš”? ëª¨ë˜í•œ ê³ ë”•? í´ë˜ì‹í•œ ëª…ì¡°?â€
    
- User: â€œëª¨ë˜í•œ ê±¸ë¡œ ì¶”ì²œí•´ì¤˜.â€
    
- Agent:
    
    - Brand Kit + Trend ë°ì´í„° ê¸°ë°˜ìœ¼ë¡œ 3ê°€ì§€ í°íŠ¸ ì œì•ˆ
        
    - ê° ì˜µì…˜ì„ ë¯¸ë¦¬ë³´ê¸°ë¡œ ì ìš© ê°€ëŠ¥í•œ ìƒíƒœë¡œ ì œê³µ
        

#### 3.3.3 Generative Actions

- â€œì—¬ê¸° ë¹ˆ ê³µê°„ì— ì–´ìš¸ë¦¬ëŠ” ì•„ì´ì½˜ ë„£ì–´ì¤˜.â€
    
    - IconGenAgent í˜¸ì¶œ â†’ ì•„ì´ì½˜ ìƒì„± â†’ ì ì ˆ ìœ„ì¹˜ì— ë°°ì¹˜.
        
- â€œì´ ìƒí’ˆ ì„¤ëª… ìš”ì•½í•´ì„œ 3ì¤„ë¡œ ì¤„ì—¬ì¤˜.â€
    
    - CopywriterAgent í˜¸ì¶œ â†’ í•´ë‹¹ `role: 'body'` í…ìŠ¤íŠ¸ ê°ì²´ ì—…ë°ì´íŠ¸.
        
- â€œCTA ë¬¸êµ¬ë¥¼ ë” ìê·¹ì ìœ¼ë¡œ ë°”ê¿”ì¤˜.â€
    
    - `role: 'cta'` ê°ì²´ë§Œ ì°¾ì•„ì„œ ìˆ˜ì •.
        

---

## 4. ğŸš€ Development Roadmap

### Phase 1: Foundation (The Skeleton) â€” [Current Target]

**Goal**: VSCode ìŠ¤íƒ€ì¼ ë ˆì´ì•„ì›ƒ + ê¸°ë³¸ ì—ë””í„° ì—”ì§„ êµ¬ì¡°.

**Tasks (P0)**

- `/studio` ë¼ìš°íŠ¸ ë° í´ë” êµ¬ì¡° ìƒì„±.
    
- Activity Bar, Left Panel, Canvas Area, Right Dock, Bottom Panel ê¸°ë³¸ UI.
    
- Zustand Store ê¸°ì´ˆ ì„¤ê³„:
    
    - `mode`, `currentDocumentId`, `selection`, `history`, `uiState`.
        
- Konva/Fabric ê¸°ë°˜ ê¸°ë³¸ Canvas ì—°ë™:
    
    - í˜ì´ì§€ í•˜ë‚˜, ì‚¬ê°í˜•/í…ìŠ¤íŠ¸ ê°ì²´ ì¶”ê°€/ì„ íƒ/ì´ë™.
        
- EditorCommand êµ¬ì¡° ì •ì˜ ë° History(Undo/Redo) ì—°ê²°.
    

### Phase 2: Core Engine (The Muscle)

**Goal**: ì „ë¬¸ê°€ê¸‰ ì´ë¯¸ì§€ í¸ì§‘ P0 ê¸°ëŠ¥ ì™„ì„±.

**Tasks (P0)**

- ê°ì²´ ì¡°ì‘:
    
    - ì´ë™, ë¦¬ì‚¬ì´ì¦ˆ, íšŒì „, ê·¸ë£¹í•‘/í•´ì œ.
        
    - Smart Guide (ì •ë ¬ì„ ), Snap-to-Grid, Snap-to-Object.
        
- ì†ì„± í¸ì§‘:
    
    - ìƒ‰ìƒ, í…Œë‘ë¦¬, ê·¸ë¦¼ì, ëª¨ì„œë¦¬ ë‘¥ê¸€ê¸°.
        
    - í…ìŠ¤íŠ¸: í°íŠ¸, í¬ê¸°, ì¤„ê°„ê²©, ìê°„, ì •ë ¬, Text Styles(Heading/Body/Caption).
        
- ì´ë¯¸ì§€ ì—…ë¡œë“œ & ë°°ì¹˜:
    
    - MinIO Assetê³¼ ì—°ë™, Drag & Drop.
        
- Multi-Page ì§€ì›:
    
    - í•˜ë‚˜ì˜ Documentì— ë‹¤ì–‘í•œ ì‚¬ì´ì¦ˆì˜ StudioPage ê´€ë¦¬.
        
- Layers Panel:
    
    - zIndex ê¸°ë°˜ ë ˆì´ì–´ íŠ¸ë¦¬, ì ê¸ˆ, ìˆ¨ê¹€.
        

**Tasks (P1)**

- Components:
    
    - ë²„íŠ¼, ì¹´ë“œ, ê°€ê²©í‘œ, ë¦¬ë·°ëª¨ë“ˆ, ë°°ì§€ ë“± ë§ˆì¼€íŒ… ì»´í¬ë„ŒíŠ¸.
        
- Safe Area & Device Frames:
    
    - ì¸ìŠ¤íƒ€, ìœ íŠœë¸Œ ì¸ë„¤ì¼ ë“± í”Œë«í¼ ë³„ ì•ˆì „ ì˜ì—­ í‘œì‹œ.
        

### Phase 3: Agent Integration (The Brain)

**Goal**: ë°±ì—”ë“œ ì—ì´ì „íŠ¸ì™€ ì—ë””í„°ì˜ ì‹¤ì‹œê°„ ì—°ë™.

**Tasks**

- EditorAgent ì—°ë™:
    
    - ìì—°ì–´ ëª…ë ¹ â†’ EditorCommand ë¦¬ìŠ¤íŠ¸ ë°˜í™˜ êµ¬ì¡° í™•ë¦½.
        
- MeetingAI ì—°ë™:
    
    - íšŒì˜ë¡ â†’ ì´ˆì•ˆ ìë™ ìƒì„± â†’ Canvas Studioì—ì„œ í¸ì§‘ ì‹œì‘.
        
- Generative Fill:
    
    - ì„ íƒ ì˜ì—­ â†’ ComfyUI ì´ë¯¸ì§€ ìƒì„± ìš”ì²­ â†’ ê²°ê³¼ë¥¼ í•´ë‹¹ ì˜ì—­ì— ë§¤í•‘.
        
- Long-running ì‘ì—…:
    
    - 202 + job_id â†’ WebSocket/SSEë¡œ ì§„í–‰ìƒí™© í‘œì‹œ.
        

### Phase 4: Video Expansion (The Evolution)

**Goal**: ì •ì§€ ì´ë¯¸ì§€ â†’ ì›€ì§ì´ëŠ” ì˜ìƒìœ¼ë¡œ í™•ì¥.

**Tasks**

- í•˜ë‹¨ Timeline íŒ¨ë„ ê¸°ë³¸ êµ¬í˜„.
    
- Keyframe ì• ë‹ˆë©”ì´ì…˜ ì‹œìŠ¤í…œ ë„ì….
    
- Video Track, Audio Track, Transition ì§€ì›.
    
- Video Export íŒŒì´í”„ë¼ì¸ (Desktop GPU + FFmpeg).
    
- Shorts/Reels/Feed ë“± ë¹„ìœ¨ ë³€í™˜ ìë™í™”.
    

---

## 5. ğŸ›  Technical Specifications (Spec v3.1)

### 5.1 Data Model: StudioDocument & Pages

```ts
type StudioDocumentType = 'image' | 'video';

interface StudioDocument {
  id: string;
  type: StudioDocumentType;
  brandId?: string;         // Brand Kit ì—°ê²°
  templateId?: string;      // ì¶œì²˜ í…œí”Œë¦¿
  name?: string;
  pages: StudioPage[];
  timeline?: TimelineTrack[];  // ë¹„ë””ì˜¤ìš© íƒ€ì„ë¼ì¸ ë°ì´í„°
  createdAt: string;
  updatedAt: string;
}
```

```ts
type StudioPageKind =
  | 'product_detail'
  | 'sns_feed'
  | 'sns_story'
  | 'sns_reel'
  | 'slide'
  | 'poster'
  | 'thumbnail'
  | 'banner';

interface StudioPage {
  id: string;
  kind: StudioPageKind;
  width: number;
  height: number;
  channel?: 'instagram' | 'youtube' | 'naver_blog' | 'coupang' | 'smartstore' | 'none';
  backgroundColor?: string;
  backgroundImageId?: string; // Asset ID
  objects: StudioObject[];
  duration?: number; // ë¹„ë””ì˜¤ìš© ì§€ì† ì‹œê°„ (ì´ˆ)
}
```

### 5.2 StudioObject: ì—­í•  ì¤‘ì‹¬ ê°ì²´ ëª¨ë¸

```ts
type StudioObjectType = 'text' | 'image' | 'video' | 'shape';

type StudioObjectRole =
  | 'title'
  | 'subtitle'
  | 'body'
  | 'price'
  | 'discount'
  | 'cta'
  | 'logo'
  | 'hero_image'
  | 'background'
  | 'icon'
  | 'badge'
  | 'decorative';

interface StudioObject {
  id: string;
  type: StudioObjectType;
  role?: StudioObjectRole;

  x: number;
  y: number;
  width?: number;
  height?: number;
  zIndex: number;

  opacity?: number;
  rotation?: number;
  groupId?: string;

  // Text ì „ìš©
  text?: string;
  fontFamily?: string;
  fontSize?: number;
  fontWeight?: number | string;
  lineHeight?: number;
  letterSpacing?: number;
  textAlign?: 'left' | 'center' | 'right' | 'justify';
  color?: string;

  // Image / Video ì „ìš©
  assetId?: string;          // MinIO Asset ID
  fit?: 'cover' | 'contain' | 'fill';
  crop?: { x: number; y: number; width: number; height: number };

  // Shape ì „ìš©
  shapeKind?: 'rect' | 'circle' | 'line' | 'polygon';
  borderColor?: string;
  borderWidth?: number;
  borderRadius?: number;

  animations?: Keyframe[];
}
```

### 5.3 Timeline & Animation

```ts
type TimelineTrackType = 'video' | 'image' | 'text' | 'audio';

interface TimelineTrack {
  id: string;
  type: TimelineTrackType;
  name?: string;
  clips: TimelineClip[];
}

interface TimelineClip {
  id: string;
  objectId?: string; // Canvas objectì™€ ì—°ê²°
  start: number;     // ì´ˆ ë‹¨ìœ„
  end: number;       // ì´ˆ ë‹¨ìœ„
  transition?: Transition;
}

interface Transition {
  type: 'fade' | 'slide' | 'zoom' | 'none';
  duration: number;
}

interface Keyframe {
  id: string;
  property: string;  // 'x', 'opacity', 'rotation', ...
  time: number;      // ì´ˆ
  value: any;
  easing?: 'linear' | 'easeIn' | 'easeOut' | 'easeInOut';
}
```

### 5.4 Brand Integration

- ëª¨ë“  DocumentëŠ” ì„ íƒì ìœ¼ë¡œ `brandId`ë¥¼ ê°–ëŠ”ë‹¤.
    
- Right Dockì˜ **Brand Panel**ì€ ë‹¤ìŒ ì •ë³´ë¥¼ ì œê³µ:
    
    - Brand Colors (Primary/Secondary/Accent)
        
    - Brand Fonts (Headings/Body)
        
    - Logo Assets
        
    - Tone of Voice ê°€ì´ë“œ(í•µì‹¬ í‚¤ì›Œë“œ)
        
- Spark Chat í˜¸ì¶œ ì‹œ:
    
    - `brandId` ê¸°ë°˜ Brand RAG Contextë¥¼ ìë™ í¬í•¨.
        
    - ì¹´í”¼, ìŠ¤íƒ€ì¼, í…œí”Œë¦¿ ì¶”ì²œ ë“±ì— ë°˜ì˜.
        

---

## 6. ğŸ¤ Agent Protocol & EditorCommand

### 6.1 EditorCommand ì •ì˜

```ts
type EditorCommandType =
  | 'ADD_OBJECT'
  | 'UPDATE_OBJECT'
  | 'DELETE_OBJECT'
  | 'GROUP_OBJECTS'
  | 'UNGROUP_OBJECTS'
  | 'APPLY_TEMPLATE'
  | 'UPDATE_BACKGROUND'
  | 'UPDATE_TEXT_STYLE'
  | 'BATCH_UPDATE'
  | 'REPLACE_IMAGE'
  | 'ARRANGE_OBJECTS'
  | 'NOOP';

interface EditorCommand {
  id: string;
  type: EditorCommandType;
  payload: any;
  source: 'user' | 'agent';
  timestamp: string;
}
```

- ëª¨ë“  í¸ì§‘ ì‘ì—…ì€ EditorCommandë¡œ ê¸°ë¡ë˜ì–´ History(Undo/Redo)ì— ìŒ“ì¸ë‹¤.
    
- Agentê°€ ì œì•ˆí•œ Commandë„ ë™ì¼ ìŠ¤íƒì— ë“¤ì–´ê°€ë©°, ì‚¬ìš©ì Undo/Redo ëŒ€ìƒì´ ëœë‹¤.
    

### 6.2 Agent API ìŠ¤í™ (Frontend â†’ Backend)

```jsonc
POST /api/v1/agents/execute
{
  "role": "editor",                // 'editor' | 'copywriter' | 'designer' | ...
  "task": "update_background",     // ì—ì´ì „íŠ¸ ë‚´ë¶€ íƒœìŠ¤í¬
  "brandId": "brand_001",
  "document": { /* ìµœì†Œ snapshot or diff */ },
  "selection": ["object_123"],
  "natural_language": "ë°°ê²½ì„ ì°¨ë¶„í•œ íŒŒë€ìƒ‰ ê·¸ë¼ë°ì´ì…˜ìœ¼ë¡œ ë°”ê¿”ì¤˜.",
  "options": {
    "preview": true
  }
}
```

**Response ì˜ˆì‹œ**

```jsonc
{
  "commands": [
    {
      "id": "cmd_001",
      "type": "UPDATE_BACKGROUND",
      "payload": {
        "pageId": "page_001",
        "backgroundGradient": {
          "from": "#406FD9",
          "to": "#162447"
        }
      },
      "source": "agent",
      "timestamp": "2025-11-19T11:00:00Z"
    }
  ],
  "messages": [
    "ì°¨ë¶„í•œ ë¸”ë£¨ ê·¸ë¼ë°ì´ì…˜ì„ ì ìš©í–ˆìŠµë‹ˆë‹¤. ë„ˆë¬´ ì–´ë‘ìš°ë©´ ë§ì”€í•´ ì£¼ì„¸ìš”."
  ]
}
```

### 6.3 Long-running ì‘ì—… (ì´ë¯¸ì§€/ë¹„ë””ì˜¤ ìƒì„±)

- ìš”ì²­ ì‹œ:
    
    - `202 Accepted` + `job_id` ë°˜í™˜
        
- ì§„í–‰ ìƒí™©:
    
    - WebSocket/SSE ì±„ë„ì—ì„œ `job_id` ê¸°ì¤€ progress ì´ë²¤íŠ¸ ì „ì†¡
        
- ì™„ë£Œ ì‹œ:
    
    - ìµœì¢… ê²°ê³¼ Assetì„ MinIOì— ì €ì¥ í›„, í•´ë‹¹ `assetId`ë¥¼ í¬í•¨í•œ EditorCommandë¥¼ ë¸Œë¡œë“œìºìŠ¤íŠ¸.
        

---

## 7. ğŸŒ Publishing Integration

Canvas StudioëŠ” ìƒì„±ëœ ì‚°ì¶œë¬¼ì„ ë‹¨ìˆœ íŒŒì¼ë¡œ ì €ì¥í•˜ëŠ” ìˆ˜ì¤€ì„ ë„˜ì–´,  
**ë©€í‹° ì±„ë„ ë°œí–‰ OS**ì˜ ì¼ë¶€ë¡œ ë™ì‘í•´ì•¼ í•œë‹¤.

### 7.1 Export Types

- **File Export**
    
    - PNG/JPEG/PDF/MP4ë¡œ ë¡œì»¬ ë‹¤ìš´ë¡œë“œ.
        
- **Publish Export**
    
    - Instagram, Naver Blog, YouTube, ê¸°íƒ€ Webhook ë“± ì™¸ë¶€ ì±„ë„ë¡œ ë°œí–‰.
        
    - ì±„ë„ë³„ë¡œ ìº¡ì…˜/í•´ì‹œíƒœê·¸/ë©”íƒ€ë°ì´í„°ë¥¼ í•¨ê»˜ ê´€ë¦¬.
        

### 7.2 Publish Flow ì˜ˆì‹œ

1. User: â€œì´ ì‹œë¦¬ì¦ˆë¥¼ ì¸ìŠ¤íƒ€ í”¼ë“œ/ìŠ¤í† ë¦¬/ë¦´ìŠ¤ë¡œ ë°œí–‰ ì¤€ë¹„í•´ì¤˜.â€
    
2. Canvas Studio:
    
    - ê° ì±„ë„ìš© StudioPageë¥¼ êµ¬ì„±í•˜ê³  ë¯¸ë¦¬ë³´ê¸° ì œê³µ.
        
3. User:
    
    - ì±„ë„ë³„ ìº¡ì…˜/í•´ì‹œíƒœê·¸ ìˆ˜ì •, ë°œí–‰ ì‹œê°„ ì˜ˆì•½.
        
4. Frontend â†’ Backend:
    
    - `POST /api/v1/publish`ë¡œ Publish Job ìƒì„±.
        
5. Backend:
    
    - Queueì— Job ë“±ë¡ â†’ ì™¸ë¶€ API í˜¸ì¶œ ì§„í–‰.
        
6. Bottom Panel:
    
    - Publish Queue ìƒíƒœ(ëŒ€ê¸°/ì§„í–‰/ì„±ê³µ/ì‹¤íŒ¨)ë¥¼ ì‹¤ì‹œê°„ ë¡œê·¸ë¡œ í‘œì‹œ.
        

---

## 8. ğŸ§  Admin Studio & Self-Learning Engine (ê´€ë¦¬ì ëª¨ë“œ)

Admin StudioëŠ” **íŠ¸ë Œë“œ í¬ë¡¤ë§, ìë™ í…œí”Œë¦¿ ìƒì„±, ë°ì´í„°ì…‹ ê´€ë¦¬, í’ˆì§ˆ í‰ê°€**ë¥¼ ë‹´ë‹¹í•˜ëŠ”  
ë‚´ë¶€ìš© ìš´ì˜ ì½˜ì†”ì´ë‹¤.

### 8.1 ê´€ë¦¬ì í˜ë¥´ì†Œë‚˜ & ëª©í‘œ

- **í˜ë¥´ì†Œë‚˜**
    
    - ë‚´ë¶€ ë§ˆì¼€í„°, í…œí”Œë¦¿ íë ˆì´í„°, ë°ì´í„° ë‹´ë‹¹ì.
        
- **ëª©í‘œ**
    
    - ì™¸ë¶€ íŠ¸ë Œë“œ/í…œí”Œë¦¿ì„ ìˆ˜ì§‘í•´ Sparklio ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì§€ì† í™•ì¥.
        
    - ì¢‹ì€ í…œí”Œë¦¿ì„ ì„ ë³„í•˜ê³ , ë‚˜ìœ í…œí”Œë¦¿ì„ ì œê±°.
        
    - ì—ì´ì „íŠ¸ í•™ìŠµ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ì—¬ ê²°ê³¼ í’ˆì§ˆì„ ê¾¸ì¤€íˆ í–¥ìƒ.
        

### 8.2 Trend Crawler & Dataset Builder

- ê¸°ëŠ¥:
    
    - íƒ€ê²Ÿ ë„ë©”ì¸/í‚¤ì›Œë“œ/ì¹´í…Œê³ ë¦¬ ì„¤ì •.
        
    - í¬ë¡¤ë§ ì£¼ê¸°, ìˆ˜ì§‘ ê±´ìˆ˜, ì œí•œ ì˜ˆì‚° ì„¤ì •.
        
    - ìˆ˜ì§‘ ê²°ê³¼ ìŠ¤í¬ë¦°ìƒ·/ë©”íƒ€ë°ì´í„° ë¯¸ë¦¬ë³´ê¸°.
        
- ë°±ì—”ë“œ:
    
    - APScheduler ê¸°ë°˜ ì •ê¸° ìˆ˜ì§‘.
        
    - ê²°ê³¼ëŠ” MinIO + PostgreSQLì— ì €ì¥.
        

### 8.3 Asset & Template Ingest

- ì…ë ¥:
    
    - í¬ë¡¤ë§ëœ ëœë”© í˜ì´ì§€ ìŠ¤í¬ë¦°ìƒ·.
        
    - ë°°ë„ˆ/í¬ìŠ¤í„° ì´ë¯¸ì§€ íŒŒì¼ (JPG/PNG).
        
    - ë””ìì´ë„ˆê°€ ì—…ë¡œë“œí•œ ë””ìì¸ íŒŒì¼ (ì´ˆê¸°ì—ëŠ” ì´ë¯¸ì§€ ì¤‘ì‹¬).
        
- **Template Analyzer**:
    
    - ë ˆì´ì•„ì›ƒ ë¸”ë¡ íƒì§€.
        
    - í…ìŠ¤íŠ¸ ì˜ì—­ ê°ì§€ + OCR ì¶”ì¶œ.
        
    - ì´ë¯¸ì§€/ë¡œê³ /ë°°ì§€/ë²„íŠ¼ ì˜ì—­ ë¶„ë¦¬.
        
- ê²°ê³¼:
    
    - StudioDocument/StudioObject êµ¬ì¡°ë¡œ ìë™ ë³€í™˜.
        
    - Adminì´ QA í›„ í…œí”Œë¦¿ìœ¼ë¡œ ìŠ¹ê²©.
        

### 8.4 Template Auto-Builder (ìë™ í…œí”Œë¦¿ ìƒì„±)

1. ë¶„ì„ëœ ë””ìì¸ â†’ ì—­í• (Role)ì„ ê°€ì§„ StudioObjectë¡œ ë³€í™˜:
    
    - title, subtitle, body, price, cta, logo, hero_image, background, badge ë“±.
        
2. Template ë©”íƒ€ë°ì´í„° ë¶€ì—¬:
    
    - category (K-Beauty, Fashion, F&B, Tech ë“±)
        
    - channel (instagram, naver_blog, youtube ë“±)
        
    - style_tags (minimal, bold, playful, premium ë“±)
        
3. Admin Studioì—ì„œ:
    
    - â€œì¢‹ìŒ/ë‚˜ì¨â€ í‰ê°€, íƒœê·¸ ìˆ˜ì •.
        
    - â€œí…œí”Œë¦¿ìœ¼ë¡œ ì €ì¥â€ ë²„íŠ¼ â†’ Template Library ë°˜ì˜.
        

### 8.5 Data Logging & Self-Learning

- Canvas Studioì—ì„œ **ì €ì¥/ë°œí–‰**ëœ ëª¨ë“  ë¬¸ì„œëŠ”:
    
    - Document êµ¬ì¡° + Brand/Channel ì •ë³´ì™€ í•¨ê»˜  
        Brand Learning Engineì— ë¡œê·¸ë¡œ ì „ì†¡.
        
- ë¶„ì„ í•­ëª© ì˜ˆ:
    
    - ë§ì´ ì‚¬ìš©ë˜ëŠ” í…œí”Œë¦¿/ë ˆì´ì•„ì›ƒ íŒ¨í„´.
        
    - ë¸Œëœë“œë³„/ì±„ë„ë³„ë¡œ ì„±ê³¼ ì¢‹ì€ ì¡°í•©.
        
- ì´ ë°ì´í„°ëŠ”:
    
    - Strategist/Copywriter/DesignerAgentì˜ ì¶”ì²œ í’ˆì§ˆ ê°œì„ .
        
    - â€œì¶”ì²œ í…œí”Œë¦¿â€, â€œì¶”ì²œ ë ˆì´ì•„ì›ƒâ€ ë­í‚¹ ì—…ë°ì´íŠ¸ì— í™œìš©.
        

---

## 9. ğŸ§© Feature Flags, QA & Telemetry

### 9.1 Feature Flags

- `INTERNAL_MODE`
    
    - trueì¼ ë•Œ:
        
        - Admin Studio([A] íƒ­) ë…¸ì¶œ.
            
        - ì‹¤í—˜ì  ê¸°ëŠ¥(ìƒˆ Video Timeline, ìƒˆ Editor Tool ë“±) ë…¸ì¶œ.
            
- `EDITOR_SCOPE`
    
    - `"image_only"` / `"image_video"` ë“±ìœ¼ë¡œ Editor ê¸°ëŠ¥ ë²”ìœ„ë¥¼ ì œì–´.
        
- `GENERATOR_SCOPE`
    
    - íŠ¹ì • ì—ì´ì „íŠ¸/ëª¨ë¸ ë¼ìš°íŒ… ì „ëµì„ í† ê¸€.
        

### 9.2 Telemetry & Metrics

- ë¡œê·¸ í•­ëª©:
    
    - command_type, source(user/agent), ì²˜ë¦¬ ì‹œê°„(latency).
        
    - ì„¸ì…˜ë‹¹ ìƒì„±/ë°œí–‰ ë¬¸ì„œ ìˆ˜.
        
    - í…œí”Œë¦¿ ì‚¬ìš© ë¹ˆë„, ë¸ŒëŸ¬ì‹œ/íˆ´ ì‚¬ìš© íŒ¨í„´.
        
- Superset ëŒ€ì‹œë³´ë“œ ì˜ˆ:
    
    - Brandë³„/ì±„ë„ë³„ Editor ì‚¬ìš©ëŸ‰.
        
    - Agent ê°œì… ë¹„ìœ¨ (ìˆœìˆ˜ ìˆ˜ë™ í¸ì§‘ vs Agent-assisted).
        
    - Publish ì„±ê³µ/ì‹¤íŒ¨ìœ¨.
        

---

## 10. âœ… Conclusion

Canvas Studio v3.1ëŠ”:

- **ì´ë¯¸ì§€/ì˜ìƒ ì œì‘ IDE**ë¡œì„œì˜ ì—­í• ì„ ì¶©ì‹¤íˆ ìˆ˜í–‰í•˜ë©´ì„œ,
    
- Brand Kit, RAG, Template Library, Admin Studio, Self-Learning Engineê³¼ ì—°ê²°ëœ  
    **â€œë¸Œëœë“œ ì¸ì§€í˜• ë§ˆì¼€íŒ… OSì˜ í•µì‹¬ í¸ì§‘ê¸°â€**ë¥¼ ëª©í‘œë¡œ í•œë‹¤.
    

Phase 1 Foundationì´ ì™„ë£Œë˜ë©´,  
ê³§ë°”ë¡œ Core Engine(P2)ê³¼ Agent Integration(P3), Admin Studio v1(í¬ë¡¤ë§/í…œí”Œë¦¿ Ingest)ì„ ë³‘ë ¬ë¡œ ì§„í–‰í•  ìˆ˜ ìˆë‹¤.  
