# Chat 기반 원페이지 스튜디오 원칙 (Demo V1)

**버전**: v1.0  
**작성일**: 2025-11-24  
**작성자**: A팀

이 문서는 Sparklio AI Marketing Studio 데모 V1에서  
**"챗 기반 원페이지 스튜디오"** UX를 일관되게 구현하기 위한 공통 원칙을 정의한다.

- 상위 문서: `SPARKLIO_DEMO_V1_PRD.md`
- 구현 상세: `FRONTEND_DEMO_FLOW.md`, `BACKEND_DEMO_APIS.md`, `AGENTS_DEMO_SPEC.md`

---

## 1. 목적

1. 데모 V1의 모든 UX/플로우가 **단일 화면(one-page)** 과 **챗 기반 오케스트레이션**이라는 철학 위에서 움직이도록 한다.
2. 프론트엔드/백엔드/에이전트/QA가 같은 기준으로
   - 레이아웃,
   - 상태 전이,
   - 챗 메시지 ↔ 시스템 행동
   을 이해하게 한다.
3. 이후 실서비스 확장 시에도 그대로 재사용 가능한 “원칙 레퍼런스” 역할을 한다.

---

## 2. 레이아웃 원칙 (원페이지 스튜디오)

### 2.1 기본 구조

- 라우트: `/studio/demo` (또는 `/studio`의 데모 모드)
- **항상 하나의 화면에서 작업이 끝나야 한다**는 원칙:
  - 별도 전체 페이지 이동 없이, 중앙 뷰만 전환/탭 전환으로 해결

### 2.2 좌/중/우 패널 역할

1) **좌측 패널 (20% 내외)**  
   - 역할: “컨텍스트 선택”
   - 구성:
     - 브랜드 선택 (드롭다운)
     - 데모용 Meeting 목록 / 최근 Meeting 리스트
     - (옵션) 프로젝트 선택/생성
   - 특징:
     - 이 패널에서 선택된 컨텍스트가 **중앙·우측에 공통으로 적용**된다.

2) **중앙 영역 (50~60%)**  
   - 역할: “결과물을 보여주는 메인 캔버스”
   - 기본 상태:
     - Meeting 요약 or 캠페인 Overview or Concept Board
   - 탭/뷰 예시:
     - `Concept Board`
     - `Slides` (프리젠테이션 뷰)
     - `Detail Page` (상세페이지/랜딩)
     - `Instagram 카드`
     - `Shorts Preview` (스토리보드/씬 리스트)
   - 원칙:
     - **뷰는 바뀌어도 “프로젝트/컨셉” 컨텍스트는 유지**된다.

3) **우측 패널 (20~30%)**  
   - 역할: “챗 오케스트레이터 + 세부 설정”
   - 기본 구성:
     - 상단: Chat 대화창
     - 하단/탭: Inspector(옵션, 파라미터 슬라이더, 토글 등)
   - 원칙:
     - 유저의 모든 주요 행동은 “우측 챗에서 시작”하는 것을 기본으로 한다.
     - 버튼/토글은 챗의 보조 수단이다.

---

## 3. 챗 = 오케스트레이터 원칙

### 3.1 역할 정의

챗은 단순 Q&A가 아니라, **전체 워크플로우를 움직이는 컨트롤 타워**이다.

- 사용자는 “자연어로 일(task)을 지시”하고
- 챗은:
  1. 의도를 해석하고,
  2. 적절한 에이전트/파이프라인을 호출하며,
  3. 현재 상태를 설명하고,
  4. 다음 행동 버튼/옵션을 제안한다.

### 3.2 챗 메시지 구조

챗 응답은 항상 다음 3요소를 포함하는 것을 원칙으로 한다.

1. **Narration (상태 설명)**  
   - 지금 무슨 일을 하고 있는지, 얼마나 걸릴지, 무엇을 했는지 설명
   - 예:
     - “회의 내용을 분석해서 캠페인 콘셉트 3가지를 뽑고 있어요.”
     - “Concept A 기준으로 슬라이드/상세/인스타 카피를 생성했습니다.”

2. **결과 요약 (핵심 포인트)**  
   - 방금 생성된 산출물의 핵심만 2~5줄로 요약
   - 예:
     - “Concept A는 ‘OO한 Z세대 타깃’에 맞춰 ···”

3. **Next Actions (행동 버튼/명령 제안)**  
   - 유저가 바로 클릭할 수 있는 2~4개의 행동
   - 예:
     - `[컨셉보드 열기] [슬라이드 보기] [상세페이지 보기] [인스타 카드 보기]`
     - `[Concept A로 쇼츠 스크립트 생성] [Concept B도 비교해줘]`

---

## 4. 상태 흐름 & 뷰 전환 규칙

### 4.1 핵심 상태

데모 V1에서 챗이 관리하는 주요 상태는 다음과 같다.

1. `meeting_loaded`  
   - Meeting From URL 성공
   - Meeting 요약/핵심 키메시지/타깃 정보 확보

2. `campaign_generated`  
   - 컨셉 세트(Concept A/B/…) 생성
   - 각 컨셉별 슬라이드/상세/인스타 초안 생성

3. `concept_board_ready`  
   - 컨셉보드에 각 컨셉 카드와 샘플 산출물 연결 완료

4. `shorts_ready` (선택)  
   - 특정 컨셉 기준 쇼츠 스크립트/스토리보드 생성 완료
   - (이미지/영상까지 연결 시 `shorts_visual_ready` 등으로 확장 가능)

### 4.2 상태 → 중앙 뷰 전환

- `meeting_loaded` 직후:
  - 기본 중앙 뷰: Meeting 요약 카드 or 캠페인 개요
  - 챗: “요약 완료” + `[캠페인 아이디어 뽑기]` 버튼 제안

- `campaign_generated` 직후:
  - 기본 중앙 뷰: **Concept Board** (최소 2개 이상의 Concept Card)
  - 챗: “캠페인 콘셉트 생성 완료” +  
    `[컨셉보드 열기] [Concept A 슬라이드 보기] [Concept A 상세 보기]` 등

- `concept_board_ready` 상태에서:
  - 컨셉 카드 클릭 시:
    - 중앙 뷰를 해당 컨셉의 산출물 탭으로 전환
    - 우측 챗에 “지금 Concept A를 보고 있습니다” 라는 컨텍스트 표시

- `shorts_ready` 상태에서:
  - 한 컨셉 기준 쇼츠 생성 후:
    - 중앙: Shorts Preview/스토리보드 뷰
    - 챗: “쇼츠 스크립트를 만들었습니다” +  
      `[쇼츠 프리뷰 보기] [스크립트 수정 요청]` 버튼

---

## 5. 챗 메시지 ↔ 백엔드 액션 매핑 패턴

### 5.1 매핑 개념

- 유저 입력 → LLM Router → Intent/Command 파싱 →  
  백엔드 서비스/에이전트 호출 → 결과 → 챗 응답 + 뷰 전환

### 5.2 대표 시나리오 패턴

1) **회의 URL 입력**

- 유저:  
  > “이 유튜브 회의 영상으로 캠페인 만들어줘: {URL}”
- 시스템:
  - `/api/v1/meetings/from-url` 호출
  - Meeting 요약/키메시지/타깃 추출
- 챗 응답:
  - Narration: “회의 내용을 분석해서 요약을 만들고 있어요…”
  - 완료 후 Next Actions:
    - `[요약 보기] [캠페인 아이디어 뽑기]`

2) **캠페인/콘셉트 생성**

- 유저:  
  > “이 회의 기준으로 2~3개의 광고 콘셉트로 캠페인을 구성해줘”
- 시스템:
  - StrategistAgent / ConceptAgent / CopywriterAgent 호출
- 챗 응답:
  - Narration: “콘셉트 3가지를 만들었어요.”
  - Next Actions:
    - `[컨셉보드 열기] [Concept A 슬라이드 보기] [Concept B 상세 보기]`

3) **쇼츠/영상 요청**

- 유저:  
  > “Concept A 기준으로 20초짜리 쇼츠도 만들어줘”
- 시스템:
  - ShortsConceptPlannerAgent -> ShortsStoryboardAgent -> (옵션) VisualPromptAgent/VideoBuilder
- 챗 응답:
  - Narration: “Concept A 기반 쇼츠 스크립트를 만들었어요.”
  - Next Actions:
    - `[쇼츠 프리뷰 보기] [스크립트 다시 다듬기]`

---

## 6. 멀티 아웃풋 & 컨셉보드 원칙

1. **모든 산출물은 “콘셉트 단위”로 묶인다.**
   - Concept A: Slides / Detail / Instagram / Shorts
   - Concept B: Slides / Detail / Instagram / Shorts …

2. **컨셉보드는 “콘셉트별 미니 대시보드”** 역할을 한다.
   - 각 카드:
     - 콘셉트 이름 + 한 줄 설명
     - 대표 비주얼 or 대표 카피
     - “자세히 보기” 버튼 (해당 탭으로 전환)

3. **챗은 항상 현재 보고 있는 콘셉트/뷰를 인식한다.**
   - 예:
     - “지금은 Concept B의 인스타 카드 뷰를 보고 있어요.”

---

## 7. 쇼츠/영상 플로우에서의 원칙

1. 쇼츠 생성도 **챗 기반 스텝**을 따른다.
   - “어떤 콘셉트 기준인지”를 명확히
   - 길이/톤/타깃을 챗에서 설정할 수 있게

2. 쇼츠 스크립트/스토리보드는
   - 씬 단위 리스트
   - 각 씬: 텍스트 + 의도 + (옵션) 이미지 프롬프트 구조

3. 이미지를 만들 때는
   - VisualPromptAgent가 ComfyUI에 보낼 프롬프트를 고도화
   - “브랜드 톤/콘셉트”와 맞도록 텍스트를 생성

4. ffmpeg 기반 영상 조립은
   - ShortsStoryboard 구조를 그대로 따라가되
   - 데모에서는 **최소한 스토리보드/키프레임 프리뷰까지만** 필수로 한다.

---

## 8. 데모 V1에서의 최소 구현 기준

데모 V1에서는 아래 항목을 “챗 기반 원페이지 스튜디오” 구현의 최소 기준으로 본다.

- `/studio/demo` 한 화면에서
  - Meeting URL 입력
  - 요약 확인
  - 캠페인/콘셉트 생성
  - 컨셉보드 확인
  - 최소 1개 컨셉 기준 멀티 아웃풋(슬라이드/상세/인스타) 확인
- 우측 챗이 위 플로우를 모두 오케스트레이션
- 컨셉보드 ↔ 각 뷰 전환이 직관적으로 연결
- (선택) 특정 콘셉트 기준 쇼츠 스크립트까지 생성

---

**상위 문서와의 관계**

- PRD에 정의된 UX 원칙을 “요약본”으로,  
- `FRONTEND_DEMO_FLOW.md`에 정의된 실제 구현 플로우를 “구체화”로 본다.
- 이 문서는 그 사이를 이어주는 **UX 레퍼런스** 역할만 한다.
