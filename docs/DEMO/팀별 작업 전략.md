

> 팀 구성
> 
> - **B팀 = 백엔드 / 에이전트 / PreCleaner**
>     
> - **C팀 = 원페이지 스튜디오 UI (프론트)**
>     
> - **A팀 = QA · 데모 운영 · 리허설 컨트롤타워**
>     


---

## 1. A팀 작업지침서

(QA · 데모 운영 · 리허설 컨트롤타워)

### 1-1. A팀 미션 정의

- **목표:**  
    학원 발표에서 “사용자가 보기엔 완벽하게 돌아가는 하나의 제품”처럼 보이게 만드는 총괄 컨트롤타워 역할.
    
- 기준 문서:
    
    - 데모 전체 기획: `SPARKLIO_DEMO_V1_PRD.md`
        
    - 데모 스토리/흐름: `SPARKLIO_DEMO_V1_STORY_AND_FLOW.md`
        
    - QA 체크리스트: `DEMO_QA_CHECKLIST.md`
        

### 1-2. 데모 성공 시나리오 정의·잠금

1. 아래 “한 번에 완주되는 플로우”를 **A팀 기준 시나리오로 고정**:
    
    1. `/studio/demo` 접속
        
    2. 회의 URL 입력 → **Meeting From URL** 실행
        
    3. 요약 완료 → **MeetingSummary + Campaign Brief + Concepts** 생성
        
    4. Concept Board에서 A/B 콘셉트 비교
        
    5. 선택된 Concept 기준으로:
        
        - Presentation 미니 슬라이드
            
        - Product Detail
            
        - Instagram News Ad
            
        - Shorts Script & (가능하면) 영상 프리뷰
            
2. 이 흐름을 기준으로 각 단계별:
    
    - “성공 화면이 어떻게 보여야 하는지”
        
    - “에러가 나면 어떤 메시지로 마무리할지”  
        를 문장으로 명시 (A팀이 문서로 확정).
        

### 1-3. QA 체크리스트 운영 (DEMO_QA_CHECKLIST 기반)

- `DEMO_QA_CHECKLIST.md`의 섹션을 실제 **운영용 체크리스트**로 사용:
    
    1. **인프라 체크:** Mac mini, DB, ComfyUI, ffmpeg 상태
        
    2. **백엔드 체크:** `/health`, 주요 API 빠른 호출
        
    3. **프론트 체크:** `/studio/demo` 로딩, 주요 버튼 작동
        
    4. **콘텐츠 체크:** 4종 산출물 + Concept Board 일관성
        
    5. **리허설 체크:** 발표자 멘트/타이밍
        
- A팀 할 일:
    
    - 이 체크리스트를 “**발표 전날용 / 당일용**” 두 버전으로 쪼개서 Notion/문서에 옮기기.
        
    - 각 항목에 담당 팀(B or C), 예상 소요시간, 비고(이슈 메모)를 추가.
        

### 1-4. PreCleaner 관련 QA 포인트

PreCleaner는 이번 데모에서 “보이지 않는 최적화”이기 때문에:

1. **품질 리스크 관리**
    
    - “중요 내용까지 잘려나갔는지”를 확인하는 **샘플 회의 2~3개**를 선정.
        
    - 각 회의에 대해:
        
        - 원본 transcript vs PreCleaner 후 transcript 비교
            
        - 요약 결과가 논리적으로 자연스러운지 확인
            
2. **토큰·비용 효과를 보여줄 수 있는지 옵션**
    
    - B팀이 제공하는 통계를 기준으로:
        
        - `original_tokens`, `cleaned_tokens`, `reduction_ratio` 같은 숫자를 간단한 표/문장으로 정리해서  
            “우리는 요약 전에 텍스트 청소를 해서 LLM 토큰을 절감하고 있다”를 발표에 넣을지 여부 결정.
            
    - 발표 시간 여유가 없으면 “내부적으로 최적화 설계 되어 있다” 정도로만 언급하고 숫자는 슬라이드 뒷장에 배치.
        

### 1-5. 리허설 시나리오 관리

1. **리허설용 스크립트 작성 (A팀 소관)**
    
    - `SPARKLIO_DEMO_V1_STORY_AND_FLOW.md`에 있는 대화형 예시를 베이스로
        
    - 발표자 멘트를 “한글 대본”으로 정리:
        
        - 사용자가 무엇을 입력하는지
            
        - 챗이 어떤 멘트를 띄우는지
            
        - 언제 Concept Board를 여는지
            
2. **위험 시나리오 대비**
    
    - YouTube Rate Limit(429), 회의 길이 과도, ComfyUI 미동작 등 리스크에 대한:
        
        - **플랜 B** (예: 미리 만들어둔 meeting_id로부터 시작)
            
        - 어떤 멘트로 자연스럽게 넘길지 스크립트화.
            
3. **최소 2회 이상 풀 리허설**
    
    - A/B/C 팀 1회씩 같이 돌려보고,
        
    - 문제가 나온 부분은 해당 팀 TODO로 재배정.
        

---

## 2. B팀 작업지침서

(백엔드 / 에이전트 / PreCleaner)

### 2-1. B팀 미션 정의

- **목표:**  
    `/studio/demo`에서 필요한 모든 API와 에이전트를 “정해진 스펙 그대로” 동작시키고,  
    특히 **Meeting → Campaign → 4종 산출물 → Shorts** 파이프라인을 안정적으로 끝까지 실행되게 하는 것.
    
- 기준 문서:
    
    - API 스펙: `BACKEND_DEMO_APIS.md`
        
    - 에이전트 스펙: `AGENTS_DEMO_SPEC.md`
        
    - 기술 아키텍처/테이블: `SPARKLIO_DEMO_V1_PRD.md` 8장
        

### 2-2. 필수 API·에이전트 완료 목록

1. **Meeting 계열**
    
    - `POST /api/v1/meetings/from-url` (STT/자막 → transcript + meeting_id)
        
    - `GET /api/v1/meetings/{meeting_id}` (status, transcript, summary 조회)
        
    - `MeetingFromUrlAgent`, `MeetingSummaryAgent` 구현/연동
        
2. **데모용 End-to-End API**
    
    - `POST /api/v1/demo/meeting-to-campaign`
        
    - `POST /api/v1/demo/campaign-to-assets`
        
    - `POST /api/v1/demo/campaign-to-shorts`  
        → 가능한 한 “프런트에서 단일 호출로 쓸 수 있도록” OrchestratorAgent 패턴 유지.
        
3. **에이전트 실행 플로우**
    
    - `AGENTS_DEMO_SPEC`의 6.1 파이프라인 순서대로 실행되도록 구현:
        
        1. MeetingFromUrlAgent
            
        2. MeetingSummaryAgent
            
        3. StrategistAgent
            
        4. ConceptAgent
            
        5. (각 Concept별) Copywriter/ShortsScript
            
        6. ReviewerAgent
            

### 2-3. PreCleaner(텍스트 청소기) 설계·구현

> **중요:** 이 부분은 기존 문서에 없던 내용이므로,  
> **B팀이 AGENTS_DEMO_SPEC에 새 섹션을 추가**해서 “경량 문서화 + 구현”까지 맡는 것으로 정리하는 것을 추천드립니다.

#### (1) 문서화 전략

- **새 소제목 추가 제안:**
    
    - 파일: `AGENTS_DEMO_SPEC.md`
        
    - 위치: `## 2. Meeting 계열 에이전트` 아래
        
    - 제목: `### 2.3 MeetingPreCleaner (Rule-based Transcript Cleaner)`
        
- 내용에 포함:
    
    1. **역할**: STT/자막 transcript에서 인사/잡담/추임새/중복을 제거하여, Summarizer LLM에 들어가는 토큰을 줄이고 품질을 높이는 전처리 모듈.
        
    2. **입력/출력 스키마 (예시)**:
        
        ```python
        # input
        {
          "segments": [
            { "start": 0.0, "end": 3.2, "speaker": "A", "text": "안녕하세요, 잘 들리시나요?" },
            ...
          ]
        }
        
        # output
        {
          "cleaned_segments": [...],
          "stats": {
            "original_tokens": 12345,
            "cleaned_tokens": 8450,
            "reduction_ratio": 0.32
          },
          "dropped_examples": [
            "안녕하세요, 잘 들리시나요?",
            "네네",
            "점심 뭐 드셨어요?"
          ]
        }
        ```
        
    3. **내부 로직 개요**:
        
        - 규칙 기반 필터:
            
            - 인사/끝인사, 추임새, 잡담 키워드 리스트
                
            - 회의 도메인 키워드 리스트
                
        - 간단한 조건:
            
            - Biz 키워드 0 + SmallTalk 키워드 ≥ 1 + 짧은 문장 → DROP
                
            - 완전 추임새(“네네”, “맞아요요요”) → DROP
                
        - Chunk 단위 낮은 정보량 구간 제거 (단어 수 너무 적거나, 이전 chunk와 유사도 0.9 이상 등)
            
    4. **성능/효과 목표(가이드)**:
        
        - 1시간 회의 기준 토큰 20~40% 절감 기대치 (참고 수치로만 문서화)
            
        - Summarizer 품질에 영향을 주지 않도록 “명백한 잡담만 제거”하는 보수적 정책부터 시작.
            

#### (2) 구현 계획

1. **모듈 위치**
    
    - `backend/app/services/meetings/precleaner.py`
        
        - 함수 예: `clean_transcript(segments: List[Segment]) -> PrecleanResult`
            
2. **파이프라인 연결**
    
    - 현재 파이프라인:  
        `MeetingFromUrlAgent → MeetingSummaryAgent`
        
    - 수정 후:  
        `MeetingFromUrlAgent → MeetingPreCleaner → MeetingSummaryAgent`
        
    - `MeetingSummaryAgent`의 입력을 `cleaned_segments` 기반으로 구성하고,  
        필요한 경우 Summarizer 프롬프트에  
        “이미 인사/잡담은 제거된 텍스트”라는 힌트만 추가.
        
3. **Feature Flag (데모 안전장치)**
    
    - 환경 변수 또는 설정:
        
        - `MEETING_PRECLEANER_ENABLED=true/false`
            
    - A팀 요청 시, 데모 직전에 PreCleaner를 끄고 원본 transcript로도 바로 회귀할 수 있게 해두기.
        
4. **로깅·통계**
    
    - `AGENTS_DEMO_SPEC`의 공통 로깅 규칙을 따라, PreCleaner도 structured log 남기기:
        
        - `tokens_before`, `tokens_after`, `reduction_ratio`
            
    - A팀이 “우리는 요약 전에 텍스트를 한 번 더 정제한다”고 설명할 때 사용할 수 있는 JSON 예시 1개 준비.
        

### 2-4. 테스트·디버깅 지원

- B팀에서 A/C팀용으로 간단한 스크립트 하나 제공:
    
    - 예: `python tools/demo_meeting_pipeline.py --url "<테스트URL>"`
        
    - 기능:
        
        - From URL → PreCleaner → Summary → Campaign → 4종 산출물 생성까지 한 번에 수행
            
        - 콘솔에 핵심 로그와 토큰 통계만 출력
            

---

## 3. C팀 작업지침서

(원페이지 스튜디오 UI / 프론트엔드)

### 3-1. C팀 미션 정의

- **목표:**  
    `/studio/demo` 한 화면에서 **회의 → 콘셉트 → 4종 산출물 → 쇼츠**가 자연스럽게 연결되는 **“VSCode 스타일 원페이지 스튜디오”**를 완성하는 것.
    
- 기준 문서:
    
    - `FRONTEND_DEMO_FLOW.md`
        
    - `CHAT_ONEPAGE_STUDIO_PRINCIPLES.md`
        
    - `CONCEPT_BOARD_SPEC.md` (README에 요약 안내)
        

### 3-2. 레이아웃·화면 구조

1. **기본 레이아웃**
    
    - 라우트: `/studio/demo`
        
    - 중앙: Concept Board + 산출물 프리뷰들 (탭 또는 카드 전환)
        
    - 우측: ChatPanel (Sparklio Assistant)
        
    - 좌측(선택): 프로젝트/회의 리스트 또는 Brand 정보 요약
        
2. **Concept Board**
    
    - 가로 카드 레이아웃 (2~3개)
        
    - 카드 클릭 시:
        
        - 중앙 프리뷰가 해당 Concept의 슬라이드/상세/인스타/쇼츠로 바뀜
            
    - 상단 바에 MeetingSummary/Brand 요약 표시.
        

### 3-3. 백엔드 연동 포인트

1. **챗 → 백엔드 호출**
    
    - 유저가 챗에 “회의 URL 붙여넣기 + 캠페인 만들어줘”를 입력하면:
        
        - 백엔드의 Orchestrator API 호출 (`demo/meeting-to-campaign`, `demo/campaign-to-assets` 등)
            
    - SSE/WebSocket 기반 진행 상태 메시지를 순차적으로 ChatPanel에 표시:
        
        - “회의 요약 중…”
            
        - “캠페인 브리프 생성 완료, 콘셉트 2개 만드는 중…”
            
        - “Concept A 기반 슬라이드 생성 중…” 등
            
2. **뷰 전환 액션**
    
    - 챗 응답 JSON의 `view`, `next_actions`를 해석해서:
        
        - `open_concept_board`, `open_slides`, `open_shorts_preview` 등 액션에 따라 중앙 뷰를 변경.
            

### 3-4. PreCleaner에 대한 프론트 역할

- C팀은 PreCleaner의 내부 구현에는 관여하지 않고,  
    **필요하다면** 다음 정도만 UI로 노출:
    

1. Meeting Summary 섹션 근처에 작은 문구:
    
    - 예: “잡담·인사 구간은 자동으로 정리된 요약입니다.”
        
2. A팀이 원하면, 설정 패널 또는 디버그 패널에:
    
    - `토큰 절감율: 32%` 같은 정보 뱃지를 띄우는 정도 (B팀이 API에 `stats`를 포함해줄 경우).
        

### 3-5. 데모 안정성 관련 TODO

1. **로딩/에러 상태 UX**
    
    - 각 주요 단계별:
        
        - 이벤트 상태: `loading`, `success`, `error`
            
        - 사용자에게 보여줄 메시지/스피너 정의
            
2. **Fallback UI**
    
    - 만약 Shorts 영상 생성이 실패하면:
        
        - 최소한 Shorts Script 텍스트와 스토리보드 형태(씬 리스트)는 항상 보이도록.
            
3. **A팀 리허설 지원**
    
    - A팀이 정해놓은 리허설 스크립트에 맞춰,
        
        - 특정 버튼 위치/문구,
            
        - “여기서 잠깐 멘트 치기 좋은 포인트”를 고려해 UI 미세 조정.
            

---

## 4. PreCleaner 문서화에 대한 결론

질문 주신 부분 정리해서 답을 드리면:

1. **이번 학원 발표 기준으로는**
    
    - 별도의 대형 문서까지 만들 필요는 없고,
        
    - `AGENTS_DEMO_SPEC.md` 안에 **Meeting 계열 에이전트의 2.3 섹션으로 포함**시키는 정도면 충분합니다.
        
2. 다만, **향후 Meeting AI 고도화**(A/B 테스트, 다양한 룰/로컬 LLM 필터 추가)를 할 계획이라면:
    
    - 나중에 `MEETING_PRECLEANER_SPEC.md` 같은 독립 문서로 분리해서:
        
        - 룰 세트 버전 관리
            
        - 토큰 절감 통계
            
        - 회의 도메인별 튜닝 전략  
            를 정리하는 것이 좋습니다.
            
3. 지금 스프린트에서는:
    
    - **B팀**: AGENTS_DEMO_SPEC에 2.3 섹션 추가 + 실제 구현
        
    - **A팀**: 샘플 회의로 PreCleaner 효과/위험 QA
        
    - **C팀**: 필요 시 UI에서 “정제된 요약” 정도만 표현  
        이 정도로 정리하면, 발표에서 **“우리는 이미 비용 최적화 구조까지 설계한 상태”**라는 메시지를 깔끔하게 전달할 수 있습니다.
        

원하시면 다음 턴에서

- `AGENTS_DEMO_SPEC.md`에 바로 붙여 쓸 수 있는 **2.3 MeetingPreCleaner 섹션 완성본**이랑,
    
- 각 팀별 TODO를 체크리스트 표 형식으로 정리해서 드릴게요.