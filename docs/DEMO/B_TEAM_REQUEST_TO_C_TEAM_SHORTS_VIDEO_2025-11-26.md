# BíŒ€ â†’ CíŒ€ ìš”ì²­ì„œ: Shorts ì˜ìƒ ìƒì„± UI ì—°ë™

**ì‘ì„±ì¼**: 2025-11-26
**ì‘ì„±ì**: BíŒ€ (Backend)
**ìˆ˜ì‹ **: CíŒ€ (Frontend)
**ìš°ì„ ìˆœìœ„**: P1 (Demo Day í•µì‹¬ ê¸°ëŠ¥)

---

## 1. ì‹ ê·œ API ì—”ë“œí¬ì¸íŠ¸ ì•ˆë‚´

### 1.1 Shorts ì˜ìƒ ìƒì„± íŠ¸ë¦¬ê±°
```
POST /api/v1/demo/generate-shorts/{concept_id}
```

**Query Parameters:**
| íŒŒë¼ë¯¸í„° | íƒ€ì… | ê¸°ë³¸ê°’ | ì„¤ëª… |
|---------|------|-------|------|
| target_duration | int | 45 | ëª©í‘œ ì˜ìƒ ê¸¸ì´ (15-60ì´ˆ) |

**Response:**
```json
{
  "task_id": "shorts_abc123def456",
  "asset_id": "uuid-string",
  "status": "generating",
  "message": "ìˆí¼ ì˜ìƒ ìƒì„±ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. (ëª©í‘œ: 45ì´ˆ)"
}
```

**Error Responses:**
- `400`: Invalid concept_id format
- `404`: Concept not found
- `409`: Shorts video is already being generated

---

### 1.2 Shorts ìƒì„± ìƒíƒœ ì¡°íšŒ
```
GET /api/v1/demo/shorts-status/{task_id}
```

**Response:**
```json
{
  "task_id": "shorts_abc123def456",
  "asset_id": "uuid-string",
  "status": "generating | completed | failed",
  "progress": 65,
  "current_step": "image_generation",
  "message": "ì´ë¯¸ì§€ ìƒì„± ì¤‘... (3/5)",
  "video_url": null,
  "preview_url": null,
  "duration_seconds": null,
  "error_message": null
}
```

**ì§„í–‰ ë‹¨ê³„ (current_step):**
| Step | Progress ë²”ìœ„ | ì„¤ëª… |
|------|--------------|------|
| script_generation | 0-20% | ìŠ¤í¬ë¦½íŠ¸ ìƒì„± ì¤‘ |
| prompt_generation | 20-30% | ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ ìƒì„± ì¤‘ |
| image_generation | 30-60% | ì”¬ë³„ ì´ë¯¸ì§€ ìƒì„± ì¤‘ |
| tts_generation | 60-80% | ë‚˜ë ˆì´ì…˜ ìƒì„± ì¤‘ |
| video_assembly | 80-100% | ì˜ìƒ ì¡°ë¦½ ì¤‘ |
| complete | 100% | ì™„ë£Œ |
| error | 0% | ì—ëŸ¬ ë°œìƒ |

---

## 2. CíŒ€ êµ¬í˜„ ìš”ì²­ì‚¬í•­

### 2.1 Shorts ì˜ìƒ ìƒì„± ë²„íŠ¼ ì¶”ê°€

**ìœ„ì¹˜**: Concept Card ë˜ëŠ” Asset ì„¹ì…˜

```tsx
// ì˜ˆì‹œ ì½”ë“œ
const handleGenerateShorts = async (conceptId: string) => {
  try {
    const response = await fetch(`/api/v1/demo/generate-shorts/${conceptId}?target_duration=45`, {
      method: 'POST'
    });
    const data = await response.json();

    if (response.ok) {
      // ìƒíƒœ í´ë§ ì‹œì‘
      startPolling(data.task_id);
    } else if (response.status === 409) {
      alert('ì´ë¯¸ ì˜ìƒ ìƒì„± ì¤‘ì…ë‹ˆë‹¤.');
    }
  } catch (error) {
    console.error('Shorts generation failed:', error);
  }
};
```

---

### 2.2 ì§„í–‰ ìƒí™© í‘œì‹œ UI

**ìš”êµ¬ì‚¬í•­:**
- í”„ë¡œê·¸ë ˆìŠ¤ ë°” (0-100%)
- í˜„ì¬ ë‹¨ê³„ í…ìŠ¤íŠ¸ í‘œì‹œ
- ì˜ˆìƒ ì™„ë£Œ ì‹œê°„ í‘œì‹œ (ì„ íƒ)

```tsx
// í´ë§ ì˜ˆì‹œ
const pollShortsStatus = async (taskId: string) => {
  const response = await fetch(`/api/v1/demo/shorts-status/${taskId}`);
  const data = await response.json();

  setProgress(data.progress);
  setCurrentStep(data.message);

  if (data.status === 'completed') {
    setVideoUrl(data.video_url);
    stopPolling();
  } else if (data.status === 'failed') {
    setError(data.error_message);
    stopPolling();
  }
};
```

**í´ë§ ê°„ê²©**: 2ì´ˆ ê¶Œì¥

---

### 2.3 ì˜ìƒ ë¯¸ë¦¬ë³´ê¸°/ë‹¤ìš´ë¡œë“œ

**ì™„ë£Œ ì‹œ:**
- `video_url`: ìƒì„±ëœ ì˜ìƒ íŒŒì¼ ê²½ë¡œ
- ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ í‘œì‹œ
- ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ì œê³µ

---

## 3. UI/UX ì œì•ˆ

### 3.1 Concept Card ë‚´ Shorts ì„¹ì…˜
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¬ Shorts ì˜ìƒ                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ìƒíƒœ: ë¯¸ìƒì„± / ìƒì„±ì¤‘ / ì™„ë£Œ]        â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸï¸ ì˜ìƒ ë¯¸ë¦¬ë³´ê¸°                 â”‚â”‚
â”‚  â”‚     (ìƒì„± ì™„ë£Œ ì‹œ í‘œì‹œ)           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                     â”‚
â”‚  ì§„í–‰ë¥ : â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%             â”‚
â”‚  í˜„ì¬: ì˜ìƒ ì¡°ë¦½ ì¤‘...               â”‚
â”‚                                     â”‚
â”‚  [ì˜ìƒ ìƒì„±í•˜ê¸°]  [ë‹¤ì‹œ ìƒì„±í•˜ê¸°]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ìƒì„± ì¤‘ ìƒíƒœ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¬ Shorts ì˜ìƒ ìƒì„± ì¤‘...           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 60%          â”‚
â”‚                                     â”‚
â”‚  ğŸ–¼ï¸ ì´ë¯¸ì§€ ìƒì„± ì¤‘... (3/5)          â”‚
â”‚                                     â”‚
â”‚  ì˜ˆìƒ ì™„ë£Œ: ì•½ 30ì´ˆ í›„               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. íŒŒì´í”„ë¼ì¸ ìƒì„¸ ì„¤ëª…

CíŒ€ ì°¸ê³ ìš©ìœ¼ë¡œ ë°±ì—”ë“œ íŒŒì´í”„ë¼ì¸ì„ ì„¤ëª…í•©ë‹ˆë‹¤:

```
[Concept ì„ íƒ]
    â†“
[POST /generate-shorts/{concept_id}]
    â†“
[Background Task ì‹œì‘]
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ShortsScriptAgent (Gemini 2.0)   â”‚
â”‚    â†’ 5ê°œ ì”¬ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±            â”‚
â”‚    â†’ Hook/Problem/Solution/CTA êµ¬ì¡°  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. VisualPromptAgent (Gemini 2.0)   â”‚
â”‚    â†’ ì”¬ë³„ ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ ìƒì„±        â”‚
â”‚    â†’ ì˜ë¬¸ Stable Diffusion í”„ë¡¬í”„íŠ¸  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Nanobanana API                   â”‚
â”‚    â†’ ì”¬ë³„ 9:16 ì´ë¯¸ì§€ ìƒì„±           â”‚
â”‚    â†’ ì•½ 3-5ì´ˆ/ì´ë¯¸ì§€                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. EdgeTTS                          â”‚
â”‚    â†’ í•œêµ­ì–´ ë‚˜ë ˆì´ì…˜ ìƒì„±            â”‚
â”‚    â†’ ko-KR-SunHiNeural ìŒì„±         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. ffmpeg                           â”‚
â”‚    â†’ ì´ë¯¸ì§€ + ì˜¤ë””ì˜¤ + BGM ì¡°ë¦½      â”‚
â”‚    â†’ 1080x1920 MP4 ì¶œë ¥             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
[GET /shorts-status/{task_id}]
    â†“
[video_url ë°˜í™˜]
```

---

## 5. Mock ë°ì´í„° (ê°œë°œìš©)

ê°œë°œ ì´ˆê¸°ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” Mock ì‘ë‹µ:

```json
// GET /shorts-status/mock_task_123
{
  "task_id": "mock_task_123",
  "asset_id": "mock-asset-uuid",
  "status": "completed",
  "progress": 100,
  "current_step": "complete",
  "message": "ì˜ìƒ ìƒì„± ì™„ë£Œ",
  "video_url": "/mock-data/sample-shorts.mp4",
  "preview_url": "/mock-data/sample-shorts-thumbnail.png",
  "duration_seconds": 45,
  "error_message": null
}
```

---

## 6. ê¸°ì¡´ APIì™€ì˜ ì—°ë™

ê¸°ì¡´ `ConceptBoardResponse`ì˜ `shorts_script` í•„ë“œì™€ ì—°ë™ë©ë‹ˆë‹¤:

```json
{
  "assets": {
    "shorts_script": {
      "id": "asset-uuid",
      "status": "pending | generating | completed | failed",
      "duration_seconds": 45
    }
  }
}
```

- `status: pending` â†’ "ì˜ìƒ ìƒì„±í•˜ê¸°" ë²„íŠ¼ í‘œì‹œ
- `status: generating` â†’ ì§„í–‰ë¥  í‘œì‹œ (í´ë§ í•„ìš”)
- `status: completed` â†’ ì˜ìƒ í”Œë ˆì´ì–´ í‘œì‹œ
- `status: failed` â†’ ì—ëŸ¬ ë©”ì‹œì§€ + "ë‹¤ì‹œ ìƒì„±í•˜ê¸°" ë²„íŠ¼

---

## 7. ì¼ì • ì œì•ˆ

| í•­ëª© | ìš°ì„ ìˆœìœ„ | ì„¤ëª… |
|-----|---------|------|
| ìƒì„± ë²„íŠ¼ êµ¬í˜„ | P0 | ê¸°ë³¸ API ì—°ë™ |
| ì§„í–‰ë¥  í‘œì‹œ | P0 | í´ë§ + í”„ë¡œê·¸ë ˆìŠ¤ ë°” |
| ì˜ìƒ ë¯¸ë¦¬ë³´ê¸° | P1 | ì™„ë£Œ í›„ í”Œë ˆì´ì–´ |
| ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ | P2 | íŒŒì¼ ë‹¤ìš´ë¡œë“œ |

---

## 8. ë¬¸ì˜ì‚¬í•­

ì§ˆë¬¸ì´ë‚˜ ì¶”ê°€ ìš”ì²­ì‚¬í•­ì´ ìˆìœ¼ë©´ BíŒ€ì—ê²Œ ì—°ë½í•´ì£¼ì„¸ìš”.

**ê´€ë ¨ íŒŒì¼:**
- Backend: `app/api/v1/demo.py`
- Backend: `app/services/shorts_video_generator.py`
- Types ì°¸ê³ : `frontend/public/mock-data/shorts-script-sample.json`
