# Canvas Studio v3.1 - 테스트 체크리스트

> **프로젝트**: Canvas Studio v3.1 - Polotno 기반 에디터
> **작성일**: 2025년 11월 21일 (금)
> **작성자**: A팀 QA
> **버전**: v1.0 Draft

---

## 📋 목차

1. [Block 1-3: 기초 인프라 & 레이아웃](#block-1-3-기초-인프라--레이아웃)
2. [Block 4-5: 패널 기능](#block-4-5-패널-기능)
3. [Block 6-7: 모드 시스템 & AI 연동](#block-6-7-모드-시스템--ai-연동)
4. [통합 테스트](#통합-테스트)
5. [성능 테스트](#성능-테스트)
6. [보안 테스트](#보안-테스트)

---

## Block 1-3: 기초 인프라 & 레이아웃

### Block 1: 프로젝트 구조 (테스트 기한: Block 1 완료 후)

#### 라우팅 테스트
- [ ] `/studio/v3` 접근 시 페이지 로드 성공
- [ ] `/studio/v3` URL이 브라우저 히스토리에 정상 기록
- [ ] 기존 `/studio/polotno` 라우트 정상 작동 (회귀 테스트)
- [ ] 404 페이지 핸들링 정상 작동
- [ ] Deep linking 테스트 (직접 URL 입력)

#### 폴더 구조 검증
- [ ] `components/canvas-studio/` 폴더 존재
- [ ] `stores/` 폴더 존재
- [ ] `app/studio/v3/page.tsx` 파일 존재
- [ ] 필수 하위 폴더 생성 확인

**예상 이슈**:
- ⚠️ Next.js 라우팅 캐싱 문제 → 하드 리프레시 테스트

**통과 기준**: 모든 체크박스 ✅

---

### Block 2: Polotno Workspace 통합 (테스트 기한: Block 2 완료 후)

#### Polotno 렌더링 테스트
- [ ] Polotno 캔버스가 화면에 표시됨
- [ ] 캔버스 배경이 흰색으로 표시
- [ ] 기본 페이지(Page 1) 생성됨
- [ ] 캔버스 크기가 정상 (기본 1920x1080)

#### API 키 검증
- [ ] 콘솔에 API 키 에러 없음
- [ ] 환경변수 로드 확인 (또는 하드코딩 사용 확인)
- [ ] Polotno 초기화 성공 메시지 확인

#### 기본 기능 테스트
- [ ] 텍스트 추가 버튼 클릭 시 텍스트 요소 생성
- [ ] 이미지 업로드 기능 작동
- [ ] 요소 선택 가능 (클릭 시 파란색 테두리)
- [ ] 요소 드래그 이동 가능
- [ ] 요소 크기 조절 가능 (핸들 드래그)

#### Store 연동 테스트
- [ ] `useCanvasStore`에 `polotnoStore` 참조 저장됨
- [ ] Zustand DevTools에서 store 상태 확인 가능

**예상 이슈**:
- ⚠️ 환경변수 로드 실패 → 하드코딩 우선 사용
- ⚠️ Polotno 라이선스 에러 → 무료 체험 기간 확인

**통과 기준**: 텍스트/이미지 추가 및 편집 가능

---

### Block 3: VSCode 스타일 레이아웃 (테스트 기한: Block 3 완료 후)

#### 레이아웃 구조 테스트
- [ ] Top Toolbar 표시 (높이 48px)
- [ ] Activity Bar 표시 (좌측, 너비 56px)
- [ ] Left Panel 표시 (너비 280px)
- [ ] Canvas Viewport 중앙 배치
- [ ] Right Dock 표시 (우측, 너비 360px)

#### 레이아웃 반응형 테스트
- [ ] 브라우저 창 크기 변경 시 레이아웃 유지
- [ ] 최소 너비에서도 UI 깨지지 않음 (최소 1280px)
- [ ] 세로 스크롤 없음 (`h-screen` 적용 확인)

#### 패널 리사이즈 테스트
- [ ] Left Panel 리사이즈 핸들 드래그 가능
- [ ] Right Dock 리사이즈 핸들 드래그 가능
- [ ] 리사이즈 시 캔버스 영역 자동 조정
- [ ] 최소/최대 너비 제한 작동

#### 패널 접기/펼치기
- [ ] Left Panel 접기 버튼 클릭 시 패널 숨김
- [ ] Right Dock 접기 버튼 클릭 시 패널 숨김
- [ ] 패널 숨김 시 캔버스 영역 확장
- [ ] 패널 다시 펼치기 정상 작동

#### Top Toolbar 기능 테스트
- [ ] 프로젝트 제목 표시
- [ ] 저장 버튼 표시
- [ ] 저장 버튼 클릭 시 로딩 상태 표시 (선택사항)

**예상 이슈**:
- ⚠️ Flexbox 높이 계산 오류 → `h-full`, `flex-1` 명시
- ⚠️ 리사이즈 핸들이 드래그되지 않음 → `cursor: col-resize` 적용

**통과 기준**: VSCode 스타일 UI 완전히 구현, 리사이즈 동작

---

## Block 4-5: 패널 기능

### Block 4: Left Panel - Pages (테스트 기한: Block 4 완료 후)

#### Pages Panel UI 테스트
- [ ] Pages Panel 탭 선택 시 페이지 목록 표시
- [ ] 현재 페이지가 하이라이트됨
- [ ] 페이지 썸네일 표시 (선택사항)
- [ ] 페이지 번호/이름 표시

#### 페이지 추가 테스트
- [ ] "페이지 추가" 버튼 클릭 시 새 페이지 생성
- [ ] 새 페이지가 목록에 추가됨
- [ ] 새 페이지가 자동 선택됨
- [ ] Polotno store의 `pages` 배열 업데이트 확인

#### 페이지 선택 테스트
- [ ] 페이지 항목 클릭 시 해당 페이지로 전환
- [ ] 캔버스에 선택된 페이지 내용 표시
- [ ] 이전 페이지에서 작업한 내용 보존

#### 페이지 삭제 테스트
- [ ] 페이지 삭제 버튼 표시
- [ ] 페이지 삭제 확인 다이얼로그 표시
- [ ] 삭제 후 이전 페이지 자동 선택
- [ ] 마지막 페이지 삭제 방지 (최소 1개 유지)

#### 페이지 재정렬 테스트 (선택사항)
- [ ] 드래그 앤 드롭으로 페이지 순서 변경
- [ ] 순서 변경 시 Polotno store 업데이트

**통과 기준**: 페이지 추가/선택/삭제 정상 작동

---

### Block 5: Right Dock - Inspector (테스트 기한: Block 5 완료 후)

#### Inspector 표시 테스트
- [ ] 요소 미선택 시 "요소를 선택하세요" 메시지 표시
- [ ] 요소 선택 시 Inspector 패널 활성화
- [ ] 선택된 요소 타입 표시 (텍스트/이미지/도형 등)

#### 위치 및 크기 편집
- [ ] X 좌표 입력 필드 표시
- [ ] Y 좌표 입력 필드 표시
- [ ] 너비(Width) 입력 필드 표시
- [ ] 높이(Height) 입력 필드 표시
- [ ] 값 변경 시 캔버스 실시간 반영
- [ ] 잘못된 값 입력 시 에러 표시

#### 회전 편집
- [ ] 회전 각도 입력 필드 표시
- [ ] 슬라이더로 회전 조절 가능
- [ ] 회전 시 캔버스 실시간 반영

#### 투명도 편집
- [ ] 투명도(Opacity) 슬라이더 표시
- [ ] 0-100% 범위 조절 가능
- [ ] 투명도 변경 시 캔버스 실시간 반영

#### 텍스트 요소 추가 속성
- [ ] 폰트 선택 드롭다운
- [ ] 폰트 크기 입력 필드
- [ ] 굵기(Bold) 토글 버튼
- [ ] 이탤릭(Italic) 토글 버튼
- [ ] 밑줄(Underline) 토글 버튼
- [ ] 텍스트 정렬 (좌/중/우)
- [ ] 텍스트 색상 Picker

#### 이미지 요소 추가 속성
- [ ] 크롭 버튼 표시
- [ ] 필터 적용 옵션 (선택사항)
- [ ] 배경 제거 버튼 (Polotno 기능)

**통과 기준**: 속성 변경 시 캔버스 실시간 반영

---

## Block 6-7: 모드 시스템 & AI 연동

### Block 6: Mode System (테스트 기한: Block 6 완료 후)

#### Activity Bar 모드 버튼 테스트
- [ ] 모든 모드 아이콘 표시 (Text, Image, Video, SNS, Template)
- [ ] 현재 모드 하이라이트 표시
- [ ] 모드 버튼 클릭 시 전환 애니메이션

#### 모드별 캔버스 프리셋 테스트
- [ ] Text 모드: A4 세로 (210x297mm)
- [ ] Image 모드: 1920x1080 (16:9)
- [ ] Video 모드: 1080x1920 (9:16, 세로형)
- [ ] SNS 모드: 1080x1080 (1:1, 인스타그램)
- [ ] Template 모드: 커스텀 사이즈

#### 모드 전환 테스트
- [ ] 모드 전환 시 캔버스 크기 변경
- [ ] 기존 작업 내용 보존 (선택사항)
- [ ] 모드 전환 확인 다이얼로그 (내용 손실 경고)

**통과 기준**: 모든 모드 전환 정상 작동

---

### Block 7: AI Agent Bridge (테스트 기한: Block 7 완료 후)

#### Spark Chat 통합 테스트
- [ ] Right Dock에 Chat 탭 표시
- [ ] 채팅 인터페이스 렌더링
- [ ] 메시지 입력 필드 활성화

#### Canvas Command 테스트
- [ ] "텍스트 추가해줘" 입력 시 캔버스에 텍스트 생성
- [ ] "이미지 추가해줘" 입력 시 이미지 업로드 UI 표시
- [ ] "배경색 변경" 입력 시 배경색 변경

#### Command Bridge 테스트
- [ ] AI 응답을 Canvas Command로 변환
- [ ] Command를 Polotno API 호출로 변환
- [ ] 명령 실행 로그 출력 (Console)

#### 에러 처리 테스트
- [ ] 잘못된 명령 입력 시 에러 메시지 표시
- [ ] LLM 응답 실패 시 Fallback 처리
- [ ] 명령 실행 실패 시 Rollback

**통과 기준**: 채팅에서 기본 명령 실행 가능

---

## 통합 테스트

### E2E 시나리오 1: 간단한 포스터 제작
```yaml
시나리오:
  1. /studio/v3 접속
  2. Image 모드 선택
  3. 텍스트 추가 ("Hello World")
  4. 이미지 업로드 (배경 이미지)
  5. 텍스트 위치/크기 조정
  6. 저장 버튼 클릭
  7. PNG로 내보내기

예상 결과:
  - 모든 단계 정상 완료
  - 내보낸 이미지에 텍스트와 배경 정상 표시
  - 워터마크 확인 (Polotno 무료 버전)
```

### E2E 시나리오 2: 멀티 페이지 작업
```yaml
시나리오:
  1. /studio/v3 접속
  2. 페이지 2개 추가 (총 3페이지)
  3. 각 페이지에 다른 내용 추가
  4. 페이지 순서 변경 (드래그 앤 드롭)
  5. 페이지 2 삭제
  6. PDF로 내보내기 (2페이지)

예상 결과:
  - PDF 파일에 2페이지 정상 포함
  - 페이지 순서 정확
```

### E2E 시나리오 3: AI 에이전트 연동
```yaml
시나리오:
  1. /studio/v3 접속
  2. Chat 탭 열기
  3. "여행 포스터 만들어줘" 입력
  4. AI가 텍스트/이미지 자동 배치
  5. Inspector에서 수동 조정
  6. 저장

예상 결과:
  - AI 명령 실행 성공
  - 자동 생성된 요소들이 캔버스에 표시
  - 수동 편집 정상 작동
```

---

## 성능 테스트

### 로딩 성능
- [ ] 초기 페이지 로드 시간 < 3초
- [ ] Polotno SDK 로드 시간 < 2초
- [ ] First Contentful Paint (FCP) < 1.5초
- [ ] Time to Interactive (TTI) < 5초

### 런타임 성능
- [ ] 요소 100개 추가해도 60fps 유지
- [ ] 페이지 10개 생성해도 메모리 누수 없음
- [ ] 캔버스 줌 인/아웃 부드러움
- [ ] 요소 드래그 시 끊김 없음

### 번들 크기
- [ ] 총 번들 크기 < 2MB (Polotno 포함)
- [ ] Code Splitting 적용 확인
- [ ] Dynamic Import 사용 확인

**성능 측정 도구**:
- Lighthouse
- Chrome DevTools Performance 탭
- Bundle Analyzer

---

## 보안 테스트

### 인증/인가
- [ ] 비로그인 사용자 접근 차단
- [ ] 테스트 계정으로 접근 가능
- [ ] 세션 만료 시 리다이렉트

### 데이터 보안
- [ ] 캔버스 데이터 서버 저장 시 암호화
- [ ] API 키 노출 없음 (환경변수 사용)
- [ ] XSS 공격 방어 (React 기본 보호)

### CORS 설정
- [ ] 이미지 업로드 CORS 정상 작동
- [ ] Polotno CDN 리소스 로드 정상
- [ ] Brand Kit API CORS 허용

---

## 버그 리포팅 템플릿

**Issue Title**: [Canvas v3] {간단한 설명}

**라벨**:
- `canvas-studio-v3`
- `priority-{critical|high|medium|low}`
- `bug` / `enhancement`

**내용**:
```markdown
## 🐛 버그 설명
{버그에 대한 명확한 설명}

## 📋 재현 단계
1. /studio/v3 접속
2. ...
3. ...

## 🔍 예상 동작
{정상적으로 작동했어야 할 동작}

## 💥 실제 동작
{실제로 발생한 동작}

## 🖼️ 스크린샷
{가능하면 스크린샷 첨부}

## 🌐 환경
- OS: Windows 11
- Browser: Chrome 120
- 테스트 계정: qa_canvas_v3@sparklio.ai

## 📝 추가 정보
{기타 관련 정보}
```

---

## 테스트 진행 상황 트래킹

### Week 1 (11/22 - 11/25)
- [ ] Block 1 테스트 완료
- [ ] Block 2 테스트 완료
- [ ] Block 3 테스트 완료
- [ ] 초기 스모크 테스트 보고서 작성

### Week 2 (11/26 - 12/02)
- [ ] Block 4 테스트 완료
- [ ] Block 5 테스트 완료
- [ ] E2E 시나리오 1-2 테스트

### Week 3 (12/03 - 12/09)
- [ ] Block 6 테스트 완료
- [ ] Block 7 테스트 완료
- [ ] E2E 시나리오 3 테스트

### Week 4 (12/10 - 12/16)
- [ ] 통합 테스트 완료
- [ ] 성능 테스트 완료
- [ ] 보안 테스트 완료
- [ ] 최종 QA 보고서 작성

---

**작성자**: A팀 QA - Claude
**버전**: v1.0 Draft
**마지막 업데이트**: 2025년 11월 21일 (금) 19:10 KST
**다음 리뷰**: Block 3 완료 후 (11/25)
