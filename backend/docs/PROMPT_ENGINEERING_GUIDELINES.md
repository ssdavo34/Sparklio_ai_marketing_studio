# Prompt Engineering Guidelines

**ì‘ì„±ì¼**: 2025-11-23
**ì‘ì„±ì**: BíŒ€ (Backend)
**ë²„ì „**: 1.0
**ëª©ì **: LLM Gateway ë° Agent ì‹œìŠ¤í…œì˜ í”„ë¡¬í”„íŠ¸ ì‘ì„± ë° ê´€ë¦¬ ê°€ì´ë“œë¼ì¸

---

## ğŸ“‹ ëª©ì°¨

1. [ê¸°ë³¸ ì›ì¹™](#ê¸°ë³¸-ì›ì¹™)
2. [Context Engineering ê¸°ë²•](#context-engineering-ê¸°ë²•)
3. [Agentë³„ ê°€ì´ë“œ](#agentë³„-ê°€ì´ë“œ)
4. [Best Practices](#best-practices)
5. [í…ŒìŠ¤íŠ¸ ë°©ë²•](#í…ŒìŠ¤íŠ¸-ë°©ë²•)
6. [ë²„ì „ ê´€ë¦¬](#ë²„ì „-ê´€ë¦¬)

---

## ê¸°ë³¸ ì›ì¹™

### 1. Role Prompting (ì—­í•  ë¶€ì—¬)

LLMì—ê²Œ ëª…í™•í•œ ì—­í• ì„ ë¶€ì—¬í•˜ì—¬ ì¶œë ¥ í’ˆì§ˆì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.

**DO âœ…**
```markdown
ë‹¹ì‹ ì€ 10ë…„ ê²½ë ¥ì˜ ì „ë¬¸ ë§ˆì¼€íŒ… ì¹´í”¼ë¼ì´í„°ì…ë‹ˆë‹¤.

## í•µì‹¬ ì—­ëŸ‰
- ì†Œë¹„ì ì‹¬ë¦¬ ì´í•´ ë° ê°ì„± í„°ì¹˜
- AIDA ëª¨ë¸ ì ìš©
- ë¸Œëœë“œ í†¤ì•¤ë§¤ë„ˆ ì¤€ìˆ˜
```

**DON'T âŒ**
```markdown
ì¹´í”¼ë¥¼ ì‘ì„±í•˜ì„¸ìš”.
```

### 2. Constraint Setting (ì œì•½ ì¡°ê±´ ì„¤ì •)

ì¶œë ¥ í˜•ì‹ê³¼ ì œì•½ ì‚¬í•­ì„ ëª…í™•íˆ ì§€ì •í•©ë‹ˆë‹¤.

**DO âœ…**
```markdown
## âš ï¸ í…ìŠ¤íŠ¸ ê¸¸ì´ ì œì•½
ğŸ”´ **Headline**: ìµœëŒ€ 20ì (ê³µë°± í¬í•¨)
ğŸ”´ **Body**: ìµœëŒ€ 80ì (2-3ë¬¸ì¥ìœ¼ë¡œ êµ¬ì„±)
ğŸ”´ **CTA**: ìµœëŒ€ 10ì
```

**DON'T âŒ**
```markdown
ì§§ê²Œ ì‘ì„±í•˜ì„¸ìš”.
```

### 3. Context Highlighting (ì»¨í…ìŠ¤íŠ¸ ê°•ì¡°)

ì¤‘ìš”í•œ ì •ë³´ë¥¼ ì‹œê°ì ìœ¼ë¡œ ê°•ì¡°í•©ë‹ˆë‹¤.

**DO âœ…**
```markdown
ğŸ“Œ ì œí’ˆëª…: ë¬´ì„  ì´ì–´í° Pro
   â†‘ ì´ ì œí’ˆëª…ì„ headlineì— ë°˜ë“œì‹œ í¬í•¨í•˜ì„¸ìš”!

ğŸ“Œ íƒ€ê²Ÿ: 2030 ì§ì¥ì¸
   â†‘ ì´ íƒ€ê²Ÿì˜ ë‹ˆì¦ˆì— ë§ì¶° ì‘ì„±í•˜ì„¸ìš”!
```

**DON'T âŒ**
```markdown
ì œí’ˆëª…: ë¬´ì„  ì´ì–´í° Pro
íƒ€ê²Ÿ: 2030 ì§ì¥ì¸
```

### 4. Output Format Specification (ì¶œë ¥ í˜•ì‹ ëª…ì‹œ)

JSON ì¶œë ¥ ì‹œ êµ¬ì²´ì ì¸ í•„ë“œì™€ ì˜ˆì‹œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

**DO âœ…**
```markdown
## JSON ì¶œë ¥ í˜•ì‹
{
  "headline": "ì œí’ˆëª… + í•µì‹¬ ê°€ì¹˜ (ìµœëŒ€ 20ì)",
  "body": "ë³¸ë¬¸ (ìµœëŒ€ 80ì)",
  "bullets": ["íŠ¹ì§•1 (ìµœëŒ€ 20ì)", "íŠ¹ì§•2", "íŠ¹ì§•3"],
  "cta": "í–‰ë™ ìœ ë„ (ìµœëŒ€ 10ì)"
}

## ì˜ˆì‹œ
{
  "headline": "í”„ë¦¬ë¯¸ì—„ ë¬´ì„  ì´ì–´í°",
  "body": "40dB ë…¸ì´ì¦ˆìº”ìŠ¬ë§ìœ¼ë¡œ ëª°ì…ê° ê·¹ëŒ€í™”",
  "bullets": ["40dB ANC", "24ì‹œê°„ ë°°í„°ë¦¬", "ë°©ìˆ˜"],
  "cta": "ì§€ê¸ˆ êµ¬ë§¤"
}
```

**DON'T âŒ**
```markdown
JSONìœ¼ë¡œ ì¶œë ¥í•˜ì„¸ìš”.
```

---

## Context Engineering ê¸°ë²•

### 1. Chain-of-Thought (CoT) - ë‹¨ê³„ë³„ ì¶”ë¡ 

ë³µì¡í•œ ì‘ì—…ì„ ë‹¨ê³„ë³„ë¡œ ë¶„í•´í•˜ì—¬ LLMì´ ì²´ê³„ì ìœ¼ë¡œ ì‚¬ê³ í•˜ë„ë¡ ìœ ë„í•©ë‹ˆë‹¤.

**ì ìš© ì˜ˆì‹œ: CopywriterAgent**
```markdown
## ğŸ§  ì‘ì„± í”„ë¡œì„¸ìŠ¤ (Chain-of-Thought)

ë‹¤ìŒ ë‹¨ê³„ë¥¼ ì°¨ê·¼ì°¨ê·¼ ìƒê°í•˜ë©´ì„œ ì¹´í”¼ë¥¼ ì‘ì„±í•˜ì„¸ìš”:

**Step 1. ì œí’ˆ ë¶„ì„**
- ì œí’ˆì˜ í•µì‹¬ ê°€ì¹˜ëŠ” ë¬´ì—‡ì¸ê°€?
- ê²½ìŸ ì œí’ˆ ëŒ€ë¹„ ì°¨ë³„ì ì€?
- ê°€ì¥ ë§¤ë ¥ì ì¸ íŠ¹ì§• Top 3ëŠ”?

**Step 2. íƒ€ê²Ÿ ì´í•´**
- íƒ€ê²Ÿ ì˜¤ë””ì–¸ìŠ¤ì˜ ë‹ˆì¦ˆëŠ”?
- ê·¸ë“¤ì˜ í˜ì¸ í¬ì¸íŠ¸ëŠ”?
- ì–´ë–¤ í˜œíƒì´ ê°€ì¥ ì™€ë‹¿ì„ê¹Œ?

**Step 3. ë©”ì‹œì§€ êµ¬ì„±**
- AIDA ëª¨ë¸ë¡œ êµ¬ì¡°í™”
- ê°ì„±ê³¼ ì´ì„±ì˜ ê· í˜•
- í†¤ì•¤ë§¤ë„ˆ ì„¤ì •

**Step 4. ê¸¸ì´ í™•ì¸**
- Headline â‰¤ 20ì í™•ì¸
- Body â‰¤ 80ì í™•ì¸

**Step 5. ìµœì¢… ê²€ì¦**
- ì œí’ˆëª… í¬í•¨ í™•ì¸
- ëª¨ë“  íŠ¹ì§• ë°˜ì˜ í™•ì¸

ê° ë‹¨ê³„ë¥¼ ë§ˆìŒì†ìœ¼ë¡œ ê±°ì¹œ í›„, ìµœì¢… JSONì„ ì¶œë ¥í•˜ì„¸ìš”.
```

**íš¨ê³¼**:
- ì¶œë ¥ í’ˆì§ˆ í–¥ìƒ (+15%)
- ë…¼ë¦¬ì  ì¼ê´€ì„± ì¦ê°€
- ì œì•½ ì¡°ê±´ ì¤€ìˆ˜ìœ¨ í–¥ìƒ

### 2. Few-shot Learning (ì˜ˆì‹œ ì œê³µ)

3-5ê°œì˜ ì¢‹ì€ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì—¬ LLMì´ íŒ¨í„´ì„ í•™ìŠµí•˜ë„ë¡ í•©ë‹ˆë‹¤.

**ì ìš© ë°©ë²•**:
```python
# Agent _enhance_payloadì—ì„œ
enhanced["_examples"] = [
    {
        "input": {"product_name": "ë¬´ì„  ì´ì–´í°", "features": ["ANC", "24ì‹œê°„"]},
        "output": {
            "headline": "ëª°ì…ì˜ ì‹œì‘, ë¬´ì„  ì´ì–´í°",
            "body": "40dB ANCë¡œ ì™„ë²½í•œ ì†ŒìŒ ì°¨ë‹¨, 24ì‹œê°„ ë°°í„°ë¦¬ë¡œ í•˜ë£¨ ì¢…ì¼",
            "cta": "ì§€ê¸ˆ êµ¬ë§¤"
        }
    },
    # ... 2-4ê°œ ë”
]
```

**ì£¼ì˜ì‚¬í•­**:
- ì˜ˆì‹œëŠ” ì°¸ê³ ìš©ì´ë©°, ë‚´ìš©ì„ ë³µì‚¬í•˜ì§€ ë§ë¼ê³  ëª…ì‹œ
- ë‹¤ì–‘í•œ ìŠ¤íƒ€ì¼/í†¤ì˜ ì˜ˆì‹œ ì œê³µ
- ë„ˆë¬´ ë§ì€ ì˜ˆì‹œëŠ” ì˜¤íˆë ¤ ì—­íš¨ê³¼ (3-5ê°œ ê¶Œì¥)

### 3. Self-Consistency (ë‹¤ì¤‘ ìƒ˜í”Œë§)

ë™ì¼í•œ ì…ë ¥ìœ¼ë¡œ Në²ˆ ìƒì„±í•˜ì—¬ ê°€ì¥ ì¼ê´€ì„± ìˆëŠ” ê²°ê³¼ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.

**êµ¬í˜„ ì˜ˆì‹œ**:
```python
async def _generate_with_self_consistency(
    self,
    request: AgentRequest,
    num_samples: int = 3
) -> AgentResponse:
    """
    ë™ì¼í•œ ì…ë ¥ìœ¼ë¡œ Në²ˆ ìƒì„±í•˜ì—¬ ê°€ì¥ ì¼ê´€ì„± ìˆëŠ” ê²°ê³¼ ì„ íƒ
    """
    responses = []
    for _ in range(num_samples):
        response = await self.llm_gateway.generate(
            role=self.name,
            task=request.task,
            payload=request.payload,
            mode="json",
            options={"temperature": 0.7}  # ë‹¤ì–‘ì„± í™•ë³´
        )
        responses.append(response)

    # ìœ ì‚¬ë„ ê¸°ë°˜ìœ¼ë¡œ ê°€ì¥ ì¼ê´€ì„± ìˆëŠ” ê²°ê³¼ ì„ íƒ
    best_response = self._select_most_consistent(responses)
    return best_response
```

**ì‚¬ìš© ì¡°ê±´**:
- `options.use_self_consistency = True`ì¼ ë•Œë§Œ í™œì„±í™”
- ì‘ë‹µ ì‹œê°„ Në°° ì¦ê°€í•˜ë¯€ë¡œ ì„ íƒì  ì‚¬ìš©
- ì¤‘ìš”í•œ ì½˜í…ì¸  (ë¸Œëœë“œ ë©”ì‹œì§€, ê´‘ê³  ì¹´í”¼ ë“±)ì—ë§Œ ì ìš©

### 4. Dynamic Context (ë™ì  ì»¨í…ìŠ¤íŠ¸ ì¡°ì •)

ì…ë ¥ ê¸¸ì´ì™€ ë³µì¡ë„ì— ë”°ë¼ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë™ì ìœ¼ë¡œ ì¡°ì •í•©ë‹ˆë‹¤.

**êµ¬í˜„ ì˜ˆì‹œ**:
```python
def _adjust_context_window(self, payload: Dict[str, Any]) -> str:
    """ì…ë ¥ ê¸¸ì´ì— ë”°ë¼ System Prompt ì¶•ì•½"""
    total_tokens = estimate_tokens(payload)

    if total_tokens > 1000:
        # ê¸´ ì…ë ¥: System Prompt ì¶•ì•½
        return self._get_compact_system_prompt(role, task)
    else:
        # ì§§ì€ ì…ë ¥: ì „ì²´ System Prompt ì‚¬ìš©
        return self._get_system_prompt(role, task)
```

---

## Agentë³„ ê°€ì´ë“œ

### CopywriterAgent

**ëª©ì **: í…ìŠ¤íŠ¸ ì½˜í…ì¸  ìƒì„± (ì œí’ˆ ì„¤ëª…, SNS, ê´‘ê³  ì¹´í”¼ ë“±)

**í•µì‹¬ ì›ì¹™**:
1. ì œí’ˆëª…ì„ Headlineì— ë°˜ë“œì‹œ í¬í•¨
2. ëª¨ë“  íŠ¹ì§•ì„ Bulletsì— ë³€í™˜í•˜ì—¬ í¬í•¨
3. ê¸¸ì´ ì œì•½ ì—„ê²© ì¤€ìˆ˜ (Canvas ìµœì í™”)
4. í†¤ì•¤ë§¤ë„ˆ ê°€ì´ë“œ ì ìš©

**í”„ë¡¬í”„íŠ¸ êµ¬ì¡°**:
```markdown
1. ì—­í•  ì •ì˜ (10ë…„ ê²½ë ¥ ì¹´í”¼ë¼ì´í„°)
2. í•µì‹¬ ì—­ëŸ‰ (AIDA ëª¨ë¸, ì†Œë¹„ì ì‹¬ë¦¬ ë“±)
3. ì‘ì„± í”„ë¡œì„¸ìŠ¤ (Chain-of-Thought)
4. ì œì•½ ì¡°ê±´ (ê¸¸ì´, ì–¸ì–´, í†¤)
5. ì¶œë ¥ í˜•ì‹ (JSON)
6. ìš°ìˆ˜ ì‚¬ë¡€ (Few-shot Examples)
```

**Golden Set ê²€ì¦**:
- 10ê°œ ì‹œë‚˜ë¦¬ì˜¤ë¡œ ìë™ í…ŒìŠ¤íŠ¸
- ìœ ì‚¬ë„ ì ìˆ˜ 7.0 ì´ìƒ
- ê¸¸ì´ ì œì•½ 100% ì¤€ìˆ˜

### ReviewerAgent

**ëª©ì **: ì½˜í…ì¸  í’ˆì§ˆ ê²€í†  ë° ê°œì„ ì•ˆ ì œì‹œ

**í•µì‹¬ ì›ì¹™**:
1. ê°ê´€ì  í‰ê°€ (5ê°€ì§€ ê¸°ì¤€)
2. êµ¬ì²´ì  ê·¼ê±° ì œì‹œ
3. ì‹¤í–‰ ê°€ëŠ¥í•œ ê°œì„ ì•ˆ
4. ê· í˜•ìˆëŠ” í”¼ë“œë°± (ê°•ì  + ì•½ì )

**í”„ë¡¬í”„íŠ¸ êµ¬ì¡°**:
```markdown
1. ì—­í•  ì •ì˜ (15ë…„ ê²½ë ¥ ê²€í†  ì „ë¬¸ê°€)
2. ê²€í†  ê¸°ì¤€ (ëª…í™•ì„±, ì„¤ë“ë ¥, ë…ì°½ì„±, íƒ€ê²Ÿ ì í•©ì„±, ë¬¸ë²•)
3. ê²€í†  í”„ë¡œì„¸ìŠ¤ (Chain-of-Thought)
4. í”¼ë“œë°± ì›ì¹™ (ê±´ì„¤ì , êµ¬ì²´ì , ì‹¤í–‰ ê°€ëŠ¥)
5. ì¶œë ¥ í˜•ì‹ (JSON)
```

### OptimizerAgent

**ëª©ì **: ê¸°ì¡´ ì½˜í…ì¸  ê°œì„  ë° ìµœì í™”

**í•µì‹¬ ì›ì¹™**:
1. ì›ë³¸ ë©”ì‹œì§€ ìœ ì§€
2. êµ¬ì²´ì  ê°œì„  ì‚¬í•­ ì ìš© (SEO, ì „í™˜ìœ¨, ê°€ë…ì„± ë“±)
3. ë³€ê²½ ë‚´ì—­ ì¶”ì 
4. A/B í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ë²„ì „ ì œê³µ

**í”„ë¡¬í”„íŠ¸ êµ¬ì¡°**:
```markdown
1. ì—­í•  ì •ì˜ (ì½˜í…ì¸  ìµœì í™” ì „ë¬¸ê°€)
2. ìµœì í™” ê¸°ë²• (SEO, ì „í™˜ìœ¨, ê°€ë…ì„±, ê¸¸ì´ ì¡°ì •, í†¤ ì¡°ì •)
3. ìµœì í™” í”„ë¡œì„¸ìŠ¤
4. ì¶œë ¥ í˜•ì‹ (ì›ë³¸ + ìµœì í™” ë²„ì „ + ë³€ê²½ ë‚´ì—­)
```

### DesignerAgent

**ëª©ì **: ë¹„ì£¼ì–¼ ì½˜í…ì¸  ìƒì„± (ì œí’ˆ ì´ë¯¸ì§€, ë°°ë„ˆ ë“±)

**í•µì‹¬ ì›ì¹™**:
1. ì˜ë¬¸ í”„ë¡¬í”„íŠ¸ë¡œ ComfyUIì— ì „ë‹¬
2. Canvas í†µí•©ì„ ìœ„í•œ ë ˆì´ì•„ì›ƒ (3:2 ë¹„ìœ¨)
3. ê¹”ë”í•œ ë°°ê²½ (í…ìŠ¤íŠ¸ ê°€ë…ì„± ìš°ì„ )
4. ì œí’ˆ ì¤‘ì‹¬ êµ¬ë„

**í”„ë¡¬í”„íŠ¸ êµ¬ì¡°**:
```markdown
1. ì—­í•  ì •ì˜ (ì œí’ˆ ë¹„ì£¼ì–¼ ì „ë¬¸ê°€)
2. ì´ë¯¸ì§€ ìƒì„± ì›ì¹™ (ì œí’ˆ ì¤‘ì‹¬, ê¹”ë”í•œ ë°°ê²½)
3. Canvas ìµœì í™” ê°€ì´ë“œë¼ì¸
4. ê¸ˆì§€ ì‚¬í•­ (í…ìŠ¤íŠ¸, ë³µì¡í•œ ë°°ê²½, ì–´ë‘ìš´ ìƒ‰ìƒ)
5. ì¶œë ¥ í˜•ì‹ (ì˜ë¬¸ í”„ë¡¬í”„íŠ¸)
```

---

## Best Practices

### DO âœ…

1. **ëª…í™•í•œ ì—­í•  ë¶€ì—¬**
   ```markdown
   ë‹¹ì‹ ì€ 10ë…„ ê²½ë ¥ì˜ ì „ë¬¸ ë§ˆì¼€íŒ… ì¹´í”¼ë¼ì´í„°ì…ë‹ˆë‹¤.
   ```

2. **êµ¬ì²´ì  ì œì•½ ì¡°ê±´**
   ```markdown
   ğŸ”´ **Headline**: ìµœëŒ€ 20ì (ê³µë°± í¬í•¨)
   ```

3. **Chain-of-Thought í™œìš©**
   ```markdown
   ## ì‘ì„± í”„ë¡œì„¸ìŠ¤
   Step 1. ì œí’ˆ ë¶„ì„
   Step 2. íƒ€ê²Ÿ ì´í•´
   ...
   ```

4. **Few-shot Examples ì œê³µ**
   ```markdown
   ## ìš°ìˆ˜ ì‚¬ë¡€ (ì°¸ê³ ìš© - ë³µì‚¬ ê¸ˆì§€)
   ì˜ˆì‹œ 1: {...}
   ì˜ˆì‹œ 2: {...}
   ```

5. **ì¤‘ìš” ì •ë³´ ê°•ì¡°**
   ```markdown
   ğŸ“Œ ì œí’ˆëª…: ë¬´ì„  ì´ì–´í°
      â†‘ ì´ ì œí’ˆëª…ì„ headlineì— ë°˜ë“œì‹œ í¬í•¨í•˜ì„¸ìš”!
   ```

6. **ëª…í™•í•œ ì¶œë ¥ í˜•ì‹**
   ```json
   {
     "headline": "...",
     "body": "..."
   }
   ```

### DON'T âŒ

1. **ëª¨í˜¸í•œ ì§€ì‹œ**
   ```markdown
   âŒ ì¢‹ì€ ì¹´í”¼ë¥¼ ì‘ì„±í•˜ì„¸ìš”.
   âœ… ì œí’ˆì˜ í•µì‹¬ ê°€ì¹˜ë¥¼ 20ì ì´ë‚´ì˜ headlineìœ¼ë¡œ ì‘ì„±í•˜ì„¸ìš”.
   ```

2. **ë„ˆë¬´ ê¸´ System Prompt**
   ```markdown
   âŒ 10í˜ì´ì§€ ë¶„ëŸ‰ì˜ ìƒì„¸ ê°€ì´ë“œ
   âœ… í•µì‹¬ ì›ì¹™ 5ê°€ì§€ + ì˜ˆì‹œ 2-3ê°œ
   ```

3. **ì¼ê´€ì„± ì—†ëŠ” ìš©ì–´**
   ```markdown
   âŒ "ì œëª©", "íƒ€ì´í‹€", "í—¤ë“œë¼ì¸"ì„ í˜¼ìš©
   âœ… "headline"ë¡œ í†µì¼
   ```

4. **ë³µì‚¬ ê°€ëŠ¥í•œ ì˜ˆì‹œ**
   ```markdown
   âŒ ì˜ˆì‹œ 1: {...}  (ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥)
   âœ… ì˜ˆì‹œ 1 (ì°¸ê³ ìš© - ë³µì‚¬ ê¸ˆì§€): {...}
   ```

5. **ê²€ì¦ ë¶ˆê°€ëŠ¥í•œ ìš”êµ¬ì‚¬í•­**
   ```markdown
   âŒ "ìµœê³ ì˜ ì¹´í”¼ë¥¼ ì‘ì„±í•˜ì„¸ìš”"
   âœ… "ìœ ì‚¬ë„ ì ìˆ˜ 7.0 ì´ìƒì„ ëª©í‘œë¡œ ì‘ì„±í•˜ì„¸ìš”"
   ```

---

## í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. Golden Set í™œìš©

**ìƒì„±**:
```json
{
  "id": "golden_001",
  "scenario": "ë¬´ì„  ì´ì–´í° - í…Œí¬ ì œí’ˆ",
  "input": {
    "task": "product_detail",
    "payload": {
      "product_name": "ë¬´ì„  ì´ì–´í° Pro",
      "features": ["ANC", "24ì‹œê°„"],
      "target_audience": "2030 ì§ì¥ì¸"
    }
  },
  "expected_output": {
    "headline": "ëª°ì…ì˜ ì‹œì‘, ë¬´ì„  ì´ì–´í° Pro",
    "body": "...",
    "bullets": ["..."]
  },
  "quality_metrics": {
    "min_score": 7.0,
    "headline_length": 15
  }
}
```

**ê²€ì¦**:
```bash
python tests/golden_set_validator.py --agent copywriter
```

### 2. A/B í…ŒìŠ¤íŠ¸

**ë°©ë²•**:
1. í”„ë¡¬í”„íŠ¸ v1.0ê³¼ v1.1ì„ ê°ê° 100ë²ˆ ì‹¤í–‰
2. Golden Set í†µê³¼ìœ¨ ë¹„êµ
3. í‰ê·  ìœ ì‚¬ë„ ì ìˆ˜ ë¹„êµ
4. ì‚¬ìš©ì ë§Œì¡±ë„ ì¡°ì‚¬ (ì„ íƒ)

**ì˜ˆì‹œ**:
```bash
# v1.0 í…ŒìŠ¤íŠ¸
python tests/ab_test.py --prompt-version v1.0 --runs 100

# v1.1 í…ŒìŠ¤íŠ¸ (CoT ì¶”ê°€)
python tests/ab_test.py --prompt-version v1.1 --runs 100

# ê²°ê³¼ ë¹„êµ
python tests/compare_ab_results.py --v1 v1.0 --v2 v1.1
```

### 3. íšŒê·€ í…ŒìŠ¤íŠ¸

**ëª©ì **: í”„ë¡¬í”„íŠ¸ ìˆ˜ì • í›„ ê¸°ì¡´ ê¸°ëŠ¥ì´ ê¹¨ì§€ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸

**ë°©ë²•**:
```bash
# ì „ì²´ Golden Set ì‹¤í–‰
python tests/golden_set_validator.py --all

# í†µê³¼ìœ¨ 95% ì´ìƒ í™•ì¸
# ì‹¤íŒ¨ ì¼€ì´ìŠ¤ ë¶„ì„
python tests/golden_set_validator.py --only-failures
```

---

## ë²„ì „ ê´€ë¦¬

### ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
app/services/llm/prompts/
â”œâ”€â”€ copywriter/
â”‚   â”œâ”€â”€ v1.0_product_detail.md
â”‚   â”œâ”€â”€ v1.1_product_detail.md  # CoT ì¶”ê°€
â”‚   â”œâ”€â”€ v1.2_product_detail.md  # Self-Consistency ì¶”ê°€
â”‚   â””â”€â”€ current â†’ v1.2_product_detail.md
â”œâ”€â”€ reviewer/
â”‚   â”œâ”€â”€ v1.0_content_review.md
â”‚   â”œâ”€â”€ v1.1_content_review.md  # CoT ì¶”ê°€
â”‚   â””â”€â”€ current â†’ v1.1_content_review.md
â””â”€â”€ CHANGELOG.md
```

### ë²„ì „ ë²ˆí˜¸ ê·œì¹™

**Major.Minor.Patch** (ì˜ˆ: 1.2.3)

- **Major** (1.x.x): êµ¬ì¡°ì  ë³€ê²½ (ì¶œë ¥ í¬ë§· ë³€ê²½, í•„ë“œ ì¶”ê°€/ì‚­ì œ ë“±)
- **Minor** (x.1.x): ê¸°ëŠ¥ ê°œì„  (CoT ì¶”ê°€, Few-shot ì˜ˆì‹œ ì¶”ê°€ ë“±)
- **Patch** (x.x.1): ë²„ê·¸ ìˆ˜ì • (ì˜¤íƒ€, ì œì•½ ì¡°ê±´ ì¡°ì • ë“±)

### CHANGELOG.md ì˜ˆì‹œ

```markdown
# Prompt Changelog

## [1.2.0] - 2025-11-23

### Added
- **CopywriterAgent**: Chain-of-Thought í”„ë¡¬í”„íŠ¸ ì¶”ê°€ (5ë‹¨ê³„ í”„ë¡œì„¸ìŠ¤)
- **ReviewerAgent**: Chain-of-Thought í”„ë¡¬í”„íŠ¸ ì¶”ê°€ (5ë‹¨ê³„ ê²€í† )

### Changed
- **CopywriterAgent**: Headline ê¸¸ì´ ì œì•½ ê°•í™” (30ì â†’ 20ì)

### Fixed
- **OptimizerAgent**: SEO ìµœì í™” ì§€ì‹œì‚¬í•­ ì˜¤íƒ€ ìˆ˜ì •

## [1.1.0] - 2025-11-16

### Added
- **CopywriterAgent**: product_detail íƒœìŠ¤í¬ Few-shot ì˜ˆì‹œ 2ê°œ ì¶”ê°€
- **DesignerAgent**: Canvas í†µí•© ê°€ì´ë“œë¼ì¸ ì¶”ê°€

### Changed
- **ReviewerAgent**: ê²€í†  ê¸°ì¤€ 5ê°€ì§€ë¡œ í™•ëŒ€ (ê¸°ì¡´ 3ê°€ì§€)

## [1.0.0] - 2025-11-10

### Added
- ì´ˆê¸° ë²„ì „: CopywriterAgent, ReviewerAgent, OptimizerAgent, DesignerAgent
```

### Git Workflow

```bash
# 1. ìƒˆ í”„ë¡¬í”„íŠ¸ ë²„ì „ ìƒì„±
cp prompts/copywriter/v1.1_product_detail.md prompts/copywriter/v1.2_product_detail.md

# 2. í”„ë¡¬í”„íŠ¸ ìˆ˜ì •
vim prompts/copywriter/v1.2_product_detail.md

# 3. Golden Set í…ŒìŠ¤íŠ¸
python tests/golden_set_validator.py --agent copywriter

# 4. í†µê³¼ ì‹œ current ì‹¬ë³¼ë¦­ ë§í¬ ì—…ë°ì´íŠ¸
ln -sf v1.2_product_detail.md prompts/copywriter/current

# 5. CHANGELOG ì—…ë°ì´íŠ¸
vim prompts/CHANGELOG.md

# 6. Git ì»¤ë°‹
git add prompts/
git commit -m "feat(prompts): CopywriterAgent v1.2 - Self-Consistency ì¶”ê°€"
git push
```

---

## ğŸ¯ ì²´í¬ë¦¬ìŠ¤íŠ¸

í”„ë¡¬í”„íŠ¸ ì‘ì„± ì‹œ ë‹¤ìŒ í•­ëª©ì„ í™•ì¸í•˜ì„¸ìš”:

- [ ] ëª…í™•í•œ ì—­í•  ë¶€ì—¬ (Role Prompting)
- [ ] êµ¬ì²´ì  ì œì•½ ì¡°ê±´ ì„¤ì • (Constraint Setting)
- [ ] ì¤‘ìš” ì •ë³´ ì‹œê°ì  ê°•ì¡° (Context Highlighting)
- [ ] ëª…í™•í•œ ì¶œë ¥ í˜•ì‹ (JSON ìŠ¤í‚¤ë§ˆ + ì˜ˆì‹œ)
- [ ] Chain-of-Thought í”„ë¡œì„¸ìŠ¤ (ë³µì¡í•œ ì‘ì—… ì‹œ)
- [ ] Few-shot Examples (2-5ê°œ)
- [ ] ê¸ˆì§€ ì‚¬í•­ ëª…ì‹œ (ì˜ˆ: ê³ ì • ì˜ˆì‹œ ì‚¬ìš© ê¸ˆì§€)
- [ ] Golden Set í…ŒìŠ¤íŠ¸ í†µê³¼ (7.0 ì´ìƒ)
- [ ] ë²„ì „ ê´€ë¦¬ (CHANGELOG ì—…ë°ì´íŠ¸)
- [ ] íšŒê·€ í…ŒìŠ¤íŠ¸ í†µê³¼ (ê¸°ì¡´ ê¸°ëŠ¥ ì •ìƒ ì‘ë™)

---

## ğŸ“š ì°¸ê³  ìë£Œ

1. **LLM Gateway ì½”ë“œ**: `app/services/llm/gateway.py`
2. **Agent ì½”ë“œ**: `app/services/agents/*.py`
3. **Golden Set**: `tests/golden_sets/copywriter_golden_set.json`
4. **Validator**: `tests/golden_set_validator.py`
5. **Context Engineering Plan**: `docs/CONTEXT_ENGINEERING_IMPROVEMENT_PLAN_2025-11-23.md`

---

**ì‘ì„±ì**: BíŒ€ (Backend)
**ì‘ì„±ì¼**: 2025-11-23
**ê²€í† ì**: AíŒ€ (QA)
**ë‹¤ìŒ ì—…ë°ì´íŠ¸ ì˜ˆì •ì¼**: 2025-12-23

**Status**: ğŸŸ¢ **ACTIVE**
